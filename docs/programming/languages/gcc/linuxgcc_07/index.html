<!DOCTYPE html>
<html lang="zh" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.150.0">
    <meta name="generator" content="Relearn 8.0.1+b23cf6629eada0c2802f34ae4012e04343497862">
    <meta name="description" content="ä¸€ ã€‚linux cåº“å‡½æ•°ç®€ä»‹
linuxä¸‹ç”¨äºcç¼–ç¨‹çš„å¤´æ–‡ä»¶ ä½äºä»¥ä¸‹ç›®å½•
/usr/local/include/usr/lib/gcc-lib/target/version/include/usr/target/include/usr/include åº“æ–‡ä»¶ä¸€èˆ¬ä½äº
/usr/libæˆ–/libæˆ–/lib64 äºŒã€‚å¸¸ç”¨åº“å‡½æ•°åˆ†ç±»ç¤ºä¾‹
1.æ–‡ä»¶æ“ä½œåº“
å‚è€ƒlinuxcå¸¸ç”¨cå‡½æ•°æ‰‹å†Œ æ–‡ä»¶æ“ä½œç¯‡ï¼ˆhttp://net.pku.edu.cn/~yhf/linux_c/ï¼‰
#include &lt;stdio.h&gt; //åŒ…å«ioæµçš„åº“ æ ‡å‡†çš„è¾“å…¥å’Œè¾“å‡º#include &#34;string.h&#34;/*** fcntl.hï¼Œæ˜¯unixæ ‡å‡†ä¸­é€šç”¨çš„å¤´æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«çš„ç›¸å…³å‡½æ•°æœ‰ openï¼Œfcntlï¼Œshutdownï¼Œunlinkï¼Œfcloseç­‰ï¼* å°±æ˜¯å®šä¹‰äº†æ–‡ä»¶æ“ä½œçš„å¸¸é‡*/#include &lt;fcntl.h&gt;#include &#34;stdlib.h&#34;/*** unistd.h æ˜¯ C å’Œ C&#43;&#43; ç¨‹åºè®¾è®¡è¯­è¨€ä¸­æä¾›å¯¹ POSIX æ“ä½œç³»ç»Ÿ API çš„è®¿é—®åŠŸèƒ½çš„å¤´æ–‡ä»¶çš„åç§°* unistd.h ä¸­æ‰€å®šä¹‰çš„æ¥å£é€šå¸¸éƒ½æ˜¯å¤§é‡é’ˆå¯¹ç³»ç»Ÿè°ƒç”¨çš„å°è£…ï¼ˆè‹±è¯­ï¼šwrapper functionsï¼‰ï¼Œå¦‚ forkã€pipe ä»¥åŠå„ç§ I/O åŸè¯­ï¼ˆreadã€writeã€close getpid() ç­‰ç­‰ï¼‰*/#include &#34;unistd.h&#34;/*** æ˜¯Unix/Linuxç³»ç»Ÿçš„åŸºæœ¬ç³»ç»Ÿæ•°æ®ç±»å‹çš„å¤´æ–‡ä»¶ï¼Œå«æœ‰size_tï¼Œtime_tï¼Œpid_tç­‰ç±»å‹ã€‚*/#include &#34;sys/types.h&#34;#define READ_SIZE 140int main() {/*-------è·å–å½“å‰çš„è¿›ç¨‹id*/pid_t pt=getpid();//pid_tåœ¨sys/types.hä¸­ getpid()åœ¨unistd.hä¸­printf(&#34;å½“å‰ç¨‹åºçš„è¿›ç¨‹idï¼š%d\n&#34;,pt);/*-------æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦*/int fileDescp=open(&#34;c:/a1.txt&#34;,O_RDONLY);//openå‡½æ•°unistdä¸­ å¸¸é‡O_RDONLYå®šä¹‰åœ¨fcntl.hchar s[READ_SIZE];memset(s,&#39;\0&#39;,READ_SIZE);//å°†æ‰€æœ‰çš„å­—èŠ‚åˆå§‹åŒ– \0/*-------è¯»å–æŒ‡å®šé•¿åº¦å­—èŠ‚*///æ³¨æ„é¡¹ç›®è®¾ç½®çš„ä»€ä¹ˆå­—ç¬¦é›† è¯»å–æ–‡ä»¶æ—¶ å¦‚æœæ–‡ä»¶ä¸æ˜¯è¯¥å­—ç¬¦é›†å°±ä¼šè¯»å‡ºä¹±ç read(fileDescp,s,READ_SIZE);printf(&#34;è¯»å–å­—ç¬¦ä¸²:%s\n&#34;,s);/*-------è¯»å–å…¨éƒ¨æ•°æ®*/lseek(fileDescp,SEEK_SET,0);//è®¾ç½®ä»0å¼€å§‹è¯»å–memset(s,&#39;\0&#39;,READ_SIZE);while((read(fileDescp,s,READ_SIZE))&gt;0){printf(&#34;è¯»å–åˆ°çš„æ•°æ® :%s\n&#34;,s);}/*-------å…³é—­æ–‡ä»¶æè¿°ç¬¦*/close(fileDescp);/*-------è¯»å–å…¨éƒ¨æ•°æ®*///åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æŒ‡å®šæƒé™ æƒé™æ•°å­—å‚è€ƒ http://www.runoob.com/linux/linux-file-attr-permission.htmlint fd1 = creat(&#34;c:/test.log&#34;,777);write(fd1, s, strlen(s));close(fd1);//getchar();//return 0;} 2.è¿›ç¨‹æ“ä½œåº“">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="linuxä¸‹gccç¼–ç¨‹07-ä½¿ç”¨linuxä¸‹cåº“å‡½æ•° :: liaomin416100569åšå®¢">
    <meta name="twitter:description" content="ä¸€ ã€‚linux cåº“å‡½æ•°ç®€ä»‹
linuxä¸‹ç”¨äºcç¼–ç¨‹çš„å¤´æ–‡ä»¶ ä½äºä»¥ä¸‹ç›®å½•
/usr/local/include/usr/lib/gcc-lib/target/version/include/usr/target/include/usr/include åº“æ–‡ä»¶ä¸€èˆ¬ä½äº
/usr/libæˆ–/libæˆ–/lib64 äºŒã€‚å¸¸ç”¨åº“å‡½æ•°åˆ†ç±»ç¤ºä¾‹
1.æ–‡ä»¶æ“ä½œåº“
å‚è€ƒlinuxcå¸¸ç”¨cå‡½æ•°æ‰‹å†Œ æ–‡ä»¶æ“ä½œç¯‡ï¼ˆhttp://net.pku.edu.cn/~yhf/linux_c/ï¼‰
#include &lt;stdio.h&gt; //åŒ…å«ioæµçš„åº“ æ ‡å‡†çš„è¾“å…¥å’Œè¾“å‡º#include &#34;string.h&#34;/*** fcntl.hï¼Œæ˜¯unixæ ‡å‡†ä¸­é€šç”¨çš„å¤´æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«çš„ç›¸å…³å‡½æ•°æœ‰ openï¼Œfcntlï¼Œshutdownï¼Œunlinkï¼Œfcloseç­‰ï¼* å°±æ˜¯å®šä¹‰äº†æ–‡ä»¶æ“ä½œçš„å¸¸é‡*/#include &lt;fcntl.h&gt;#include &#34;stdlib.h&#34;/*** unistd.h æ˜¯ C å’Œ C&#43;&#43; ç¨‹åºè®¾è®¡è¯­è¨€ä¸­æä¾›å¯¹ POSIX æ“ä½œç³»ç»Ÿ API çš„è®¿é—®åŠŸèƒ½çš„å¤´æ–‡ä»¶çš„åç§°* unistd.h ä¸­æ‰€å®šä¹‰çš„æ¥å£é€šå¸¸éƒ½æ˜¯å¤§é‡é’ˆå¯¹ç³»ç»Ÿè°ƒç”¨çš„å°è£…ï¼ˆè‹±è¯­ï¼šwrapper functionsï¼‰ï¼Œå¦‚ forkã€pipe ä»¥åŠå„ç§ I/O åŸè¯­ï¼ˆreadã€writeã€close getpid() ç­‰ç­‰ï¼‰*/#include &#34;unistd.h&#34;/*** æ˜¯Unix/Linuxç³»ç»Ÿçš„åŸºæœ¬ç³»ç»Ÿæ•°æ®ç±»å‹çš„å¤´æ–‡ä»¶ï¼Œå«æœ‰size_tï¼Œtime_tï¼Œpid_tç­‰ç±»å‹ã€‚*/#include &#34;sys/types.h&#34;#define READ_SIZE 140int main() {/*-------è·å–å½“å‰çš„è¿›ç¨‹id*/pid_t pt=getpid();//pid_tåœ¨sys/types.hä¸­ getpid()åœ¨unistd.hä¸­printf(&#34;å½“å‰ç¨‹åºçš„è¿›ç¨‹idï¼š%d\n&#34;,pt);/*-------æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦*/int fileDescp=open(&#34;c:/a1.txt&#34;,O_RDONLY);//openå‡½æ•°unistdä¸­ å¸¸é‡O_RDONLYå®šä¹‰åœ¨fcntl.hchar s[READ_SIZE];memset(s,&#39;\0&#39;,READ_SIZE);//å°†æ‰€æœ‰çš„å­—èŠ‚åˆå§‹åŒ– \0/*-------è¯»å–æŒ‡å®šé•¿åº¦å­—èŠ‚*///æ³¨æ„é¡¹ç›®è®¾ç½®çš„ä»€ä¹ˆå­—ç¬¦é›† è¯»å–æ–‡ä»¶æ—¶ å¦‚æœæ–‡ä»¶ä¸æ˜¯è¯¥å­—ç¬¦é›†å°±ä¼šè¯»å‡ºä¹±ç read(fileDescp,s,READ_SIZE);printf(&#34;è¯»å–å­—ç¬¦ä¸²:%s\n&#34;,s);/*-------è¯»å–å…¨éƒ¨æ•°æ®*/lseek(fileDescp,SEEK_SET,0);//è®¾ç½®ä»0å¼€å§‹è¯»å–memset(s,&#39;\0&#39;,READ_SIZE);while((read(fileDescp,s,READ_SIZE))&gt;0){printf(&#34;è¯»å–åˆ°çš„æ•°æ® :%s\n&#34;,s);}/*-------å…³é—­æ–‡ä»¶æè¿°ç¬¦*/close(fileDescp);/*-------è¯»å–å…¨éƒ¨æ•°æ®*///åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æŒ‡å®šæƒé™ æƒé™æ•°å­—å‚è€ƒ http://www.runoob.com/linux/linux-file-attr-permission.htmlint fd1 = creat(&#34;c:/test.log&#34;,777);write(fd1, s, strlen(s));close(fd1);//getchar();//return 0;} 2.è¿›ç¨‹æ“ä½œåº“">
    <meta property="og:url" content="https://jiaozi789.github.io/docs/programming/languages/gcc/linuxgcc_07/index.html">
    <meta property="og:site_name" content="liaomin416100569åšå®¢">
    <meta property="og:title" content="linuxä¸‹gccç¼–ç¨‹07-ä½¿ç”¨linuxä¸‹cåº“å‡½æ•° :: liaomin416100569åšå®¢">
    <meta property="og:description" content="ä¸€ ã€‚linux cåº“å‡½æ•°ç®€ä»‹
linuxä¸‹ç”¨äºcç¼–ç¨‹çš„å¤´æ–‡ä»¶ ä½äºä»¥ä¸‹ç›®å½•
/usr/local/include/usr/lib/gcc-lib/target/version/include/usr/target/include/usr/include åº“æ–‡ä»¶ä¸€èˆ¬ä½äº
/usr/libæˆ–/libæˆ–/lib64 äºŒã€‚å¸¸ç”¨åº“å‡½æ•°åˆ†ç±»ç¤ºä¾‹
1.æ–‡ä»¶æ“ä½œåº“
å‚è€ƒlinuxcå¸¸ç”¨cå‡½æ•°æ‰‹å†Œ æ–‡ä»¶æ“ä½œç¯‡ï¼ˆhttp://net.pku.edu.cn/~yhf/linux_c/ï¼‰
#include &lt;stdio.h&gt; //åŒ…å«ioæµçš„åº“ æ ‡å‡†çš„è¾“å…¥å’Œè¾“å‡º#include &#34;string.h&#34;/*** fcntl.hï¼Œæ˜¯unixæ ‡å‡†ä¸­é€šç”¨çš„å¤´æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«çš„ç›¸å…³å‡½æ•°æœ‰ openï¼Œfcntlï¼Œshutdownï¼Œunlinkï¼Œfcloseç­‰ï¼* å°±æ˜¯å®šä¹‰äº†æ–‡ä»¶æ“ä½œçš„å¸¸é‡*/#include &lt;fcntl.h&gt;#include &#34;stdlib.h&#34;/*** unistd.h æ˜¯ C å’Œ C&#43;&#43; ç¨‹åºè®¾è®¡è¯­è¨€ä¸­æä¾›å¯¹ POSIX æ“ä½œç³»ç»Ÿ API çš„è®¿é—®åŠŸèƒ½çš„å¤´æ–‡ä»¶çš„åç§°* unistd.h ä¸­æ‰€å®šä¹‰çš„æ¥å£é€šå¸¸éƒ½æ˜¯å¤§é‡é’ˆå¯¹ç³»ç»Ÿè°ƒç”¨çš„å°è£…ï¼ˆè‹±è¯­ï¼šwrapper functionsï¼‰ï¼Œå¦‚ forkã€pipe ä»¥åŠå„ç§ I/O åŸè¯­ï¼ˆreadã€writeã€close getpid() ç­‰ç­‰ï¼‰*/#include &#34;unistd.h&#34;/*** æ˜¯Unix/Linuxç³»ç»Ÿçš„åŸºæœ¬ç³»ç»Ÿæ•°æ®ç±»å‹çš„å¤´æ–‡ä»¶ï¼Œå«æœ‰size_tï¼Œtime_tï¼Œpid_tç­‰ç±»å‹ã€‚*/#include &#34;sys/types.h&#34;#define READ_SIZE 140int main() {/*-------è·å–å½“å‰çš„è¿›ç¨‹id*/pid_t pt=getpid();//pid_tåœ¨sys/types.hä¸­ getpid()åœ¨unistd.hä¸­printf(&#34;å½“å‰ç¨‹åºçš„è¿›ç¨‹idï¼š%d\n&#34;,pt);/*-------æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦*/int fileDescp=open(&#34;c:/a1.txt&#34;,O_RDONLY);//openå‡½æ•°unistdä¸­ å¸¸é‡O_RDONLYå®šä¹‰åœ¨fcntl.hchar s[READ_SIZE];memset(s,&#39;\0&#39;,READ_SIZE);//å°†æ‰€æœ‰çš„å­—èŠ‚åˆå§‹åŒ– \0/*-------è¯»å–æŒ‡å®šé•¿åº¦å­—èŠ‚*///æ³¨æ„é¡¹ç›®è®¾ç½®çš„ä»€ä¹ˆå­—ç¬¦é›† è¯»å–æ–‡ä»¶æ—¶ å¦‚æœæ–‡ä»¶ä¸æ˜¯è¯¥å­—ç¬¦é›†å°±ä¼šè¯»å‡ºä¹±ç read(fileDescp,s,READ_SIZE);printf(&#34;è¯»å–å­—ç¬¦ä¸²:%s\n&#34;,s);/*-------è¯»å–å…¨éƒ¨æ•°æ®*/lseek(fileDescp,SEEK_SET,0);//è®¾ç½®ä»0å¼€å§‹è¯»å–memset(s,&#39;\0&#39;,READ_SIZE);while((read(fileDescp,s,READ_SIZE))&gt;0){printf(&#34;è¯»å–åˆ°çš„æ•°æ® :%s\n&#34;,s);}/*-------å…³é—­æ–‡ä»¶æè¿°ç¬¦*/close(fileDescp);/*-------è¯»å–å…¨éƒ¨æ•°æ®*///åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æŒ‡å®šæƒé™ æƒé™æ•°å­—å‚è€ƒ http://www.runoob.com/linux/linux-file-attr-permission.htmlint fd1 = creat(&#34;c:/test.log&#34;,777);write(fd1, s, strlen(s));close(fd1);//getchar();//return 0;} 2.è¿›ç¨‹æ“ä½œåº“">
    <meta property="og:locale" content="zh">
    <meta property="og:type" content="article">
    <meta property="article:section" content="ç¼–ç¨‹å¼€å‘">
    <meta property="article:published_time" content="2025-09-18T16:55:17+08:00">
    <meta property="article:modified_time" content="2025-09-18T16:55:17+08:00">
    <meta itemprop="name" content="linuxä¸‹gccç¼–ç¨‹07-ä½¿ç”¨linuxä¸‹cåº“å‡½æ•° :: liaomin416100569åšå®¢">
    <meta itemprop="description" content="ä¸€ ã€‚linux cåº“å‡½æ•°ç®€ä»‹
linuxä¸‹ç”¨äºcç¼–ç¨‹çš„å¤´æ–‡ä»¶ ä½äºä»¥ä¸‹ç›®å½•
/usr/local/include/usr/lib/gcc-lib/target/version/include/usr/target/include/usr/include åº“æ–‡ä»¶ä¸€èˆ¬ä½äº
/usr/libæˆ–/libæˆ–/lib64 äºŒã€‚å¸¸ç”¨åº“å‡½æ•°åˆ†ç±»ç¤ºä¾‹
1.æ–‡ä»¶æ“ä½œåº“
å‚è€ƒlinuxcå¸¸ç”¨cå‡½æ•°æ‰‹å†Œ æ–‡ä»¶æ“ä½œç¯‡ï¼ˆhttp://net.pku.edu.cn/~yhf/linux_c/ï¼‰
#include &lt;stdio.h&gt; //åŒ…å«ioæµçš„åº“ æ ‡å‡†çš„è¾“å…¥å’Œè¾“å‡º#include &#34;string.h&#34;/*** fcntl.hï¼Œæ˜¯unixæ ‡å‡†ä¸­é€šç”¨çš„å¤´æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«çš„ç›¸å…³å‡½æ•°æœ‰ openï¼Œfcntlï¼Œshutdownï¼Œunlinkï¼Œfcloseç­‰ï¼* å°±æ˜¯å®šä¹‰äº†æ–‡ä»¶æ“ä½œçš„å¸¸é‡*/#include &lt;fcntl.h&gt;#include &#34;stdlib.h&#34;/*** unistd.h æ˜¯ C å’Œ C&#43;&#43; ç¨‹åºè®¾è®¡è¯­è¨€ä¸­æä¾›å¯¹ POSIX æ“ä½œç³»ç»Ÿ API çš„è®¿é—®åŠŸèƒ½çš„å¤´æ–‡ä»¶çš„åç§°* unistd.h ä¸­æ‰€å®šä¹‰çš„æ¥å£é€šå¸¸éƒ½æ˜¯å¤§é‡é’ˆå¯¹ç³»ç»Ÿè°ƒç”¨çš„å°è£…ï¼ˆè‹±è¯­ï¼šwrapper functionsï¼‰ï¼Œå¦‚ forkã€pipe ä»¥åŠå„ç§ I/O åŸè¯­ï¼ˆreadã€writeã€close getpid() ç­‰ç­‰ï¼‰*/#include &#34;unistd.h&#34;/*** æ˜¯Unix/Linuxç³»ç»Ÿçš„åŸºæœ¬ç³»ç»Ÿæ•°æ®ç±»å‹çš„å¤´æ–‡ä»¶ï¼Œå«æœ‰size_tï¼Œtime_tï¼Œpid_tç­‰ç±»å‹ã€‚*/#include &#34;sys/types.h&#34;#define READ_SIZE 140int main() {/*-------è·å–å½“å‰çš„è¿›ç¨‹id*/pid_t pt=getpid();//pid_tåœ¨sys/types.hä¸­ getpid()åœ¨unistd.hä¸­printf(&#34;å½“å‰ç¨‹åºçš„è¿›ç¨‹idï¼š%d\n&#34;,pt);/*-------æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦*/int fileDescp=open(&#34;c:/a1.txt&#34;,O_RDONLY);//openå‡½æ•°unistdä¸­ å¸¸é‡O_RDONLYå®šä¹‰åœ¨fcntl.hchar s[READ_SIZE];memset(s,&#39;\0&#39;,READ_SIZE);//å°†æ‰€æœ‰çš„å­—èŠ‚åˆå§‹åŒ– \0/*-------è¯»å–æŒ‡å®šé•¿åº¦å­—èŠ‚*///æ³¨æ„é¡¹ç›®è®¾ç½®çš„ä»€ä¹ˆå­—ç¬¦é›† è¯»å–æ–‡ä»¶æ—¶ å¦‚æœæ–‡ä»¶ä¸æ˜¯è¯¥å­—ç¬¦é›†å°±ä¼šè¯»å‡ºä¹±ç read(fileDescp,s,READ_SIZE);printf(&#34;è¯»å–å­—ç¬¦ä¸²:%s\n&#34;,s);/*-------è¯»å–å…¨éƒ¨æ•°æ®*/lseek(fileDescp,SEEK_SET,0);//è®¾ç½®ä»0å¼€å§‹è¯»å–memset(s,&#39;\0&#39;,READ_SIZE);while((read(fileDescp,s,READ_SIZE))&gt;0){printf(&#34;è¯»å–åˆ°çš„æ•°æ® :%s\n&#34;,s);}/*-------å…³é—­æ–‡ä»¶æè¿°ç¬¦*/close(fileDescp);/*-------è¯»å–å…¨éƒ¨æ•°æ®*///åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æŒ‡å®šæƒé™ æƒé™æ•°å­—å‚è€ƒ http://www.runoob.com/linux/linux-file-attr-permission.htmlint fd1 = creat(&#34;c:/test.log&#34;,777);write(fd1, s, strlen(s));close(fd1);//getchar();//return 0;} 2.è¿›ç¨‹æ“ä½œåº“">
    <meta itemprop="datePublished" content="2025-09-18T16:55:17+08:00">
    <meta itemprop="dateModified" content="2025-09-18T16:55:17+08:00">
    <meta itemprop="wordCount" content="842">
    <title>linuxä¸‹gccç¼–ç¨‹07-ä½¿ç”¨linuxä¸‹cåº“å‡½æ•° :: liaomin416100569åšå®¢</title>
    <link href="/docs/css/auto-complete/auto-complete.min.css?1758355652" rel="stylesheet">
    <script src="/docs/js/auto-complete/auto-complete.min.js?1758355652" defer></script>
    <script src="/docs/js/search-lunr.min.js?1758355652" defer></script>
    <script src="/docs/js/search.min.js?1758355652" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/docs/searchindex.en.js?1758355652";
    </script>
    <script src="/docs/js/lunr/lunr.min.js?1758355652" defer></script>
    <script src="/docs/js/lunr/lunr.stemmer.support.min.js?1758355652" defer></script>
    <script src="/docs/js/lunr/lunr.multi.min.js?1758355652" defer></script>
    <script src="/docs/js/lunr/lunr.zh.min.js?1758355652" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['zh'];
    </script>
    <link href="/docs/fonts/fontawesome/css/fontawesome-all.min.css?1758355652" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/docs/fonts/fontawesome/css/fontawesome-all.min.css?1758355652" rel="stylesheet"></noscript>
    <link href="/docs/css/perfect-scrollbar/perfect-scrollbar.min.css?1758355652" rel="stylesheet">
    <link href="/docs/css/theme.min.css?1758355652" rel="stylesheet">
    <link href="/docs/css/format-html.min.css?1758355652" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/programming\/languages\/gcc\/linuxgcc_07\/index.html';
      window.relearn.relBasePath='..\/..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..\/..';
      window.relearn.absBaseUri='https:\/\/jiaozi789.github.io\/docs';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=false;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'auto' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
    <link href="/docs/css/custom.css?1758355652" rel="stylesheet">
  </head>
  <body class="mobile-support html" data-url="/docs/programming/languages/gcc/linuxgcc_07/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper"> 
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/docs/index.html"><span itemprop="name">liaomin416100569åšå®¢</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/docs/programming/index.html"><span itemprop="name">ç¼–ç¨‹å¼€å‘</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/docs/programming/languages/index.html"><span itemprop="name">ç¼–ç¨‹è¯­è¨€</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/docs/programming/languages/gcc/index.html"><span itemprop="name">cè¯­è¨€</span></a><meta itemprop="position" content="4">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">linuxä¸‹gccç¼–ç¨‹07-ä½¿ç”¨linuxä¸‹cåº“å‡½æ•°</span><meta itemprop="position" content="5"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/docs/programming/languages/gcc/linuxgcc_06/index.html" title="linuxä¸‹gccç¼–ç¨‹06-cè¯­è¨€å‚è€ƒæ‰‹å†Œ (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/docs/programming/languages/gcc/linuxgcc_08/index.html" title="linuxä¸‹gccç¼–ç¨‹08-ç¼–è¯‘linuxå†…æ ¸ (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable programming" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="linuxä¸‹gccç¼–ç¨‹07-ä½¿ç”¨linuxä¸‹cåº“å‡½æ•°">linuxä¸‹gccç¼–ç¨‹07-ä½¿ç”¨linuxä¸‹cåº“å‡½æ•°</h1>

<script>
window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$','$$'], ['\\[','\\]']]
  }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>

<p><strong>ä¸€ ã€‚linux cåº“å‡½æ•°ç®€ä»‹</strong></p>
<p>linuxä¸‹ç”¨äºcç¼–ç¨‹çš„å¤´æ–‡ä»¶ ä½äºä»¥ä¸‹ç›®å½•</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>/usr/local/include
/usr/lib/gcc-lib/target/version/include
/usr/target/include
/usr/include</code></pre></div>
<p>åº“æ–‡ä»¶ä¸€èˆ¬ä½äº</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>/usr/libæˆ–/libæˆ–/lib64</code></pre></div>
<p><strong>äºŒã€‚å¸¸ç”¨åº“å‡½æ•°åˆ†ç±»ç¤ºä¾‹</strong></p>
<p>1.æ–‡ä»¶æ“ä½œåº“</p>
<p>Â  å‚è€ƒlinuxcå¸¸ç”¨cå‡½æ•°æ‰‹å†Œ æ–‡ä»¶æ“ä½œç¯‡ï¼ˆ<a href="http://net.pku.edu.cn/~yhf/linux_c/" rel="external" target="_blank">http://net.pku.edu.cn/~yhf/linux_c/</a>ï¼‰</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>#include &lt;stdio.h&gt; //åŒ…å«ioæµçš„åº“ æ ‡å‡†çš„è¾“å…¥å’Œè¾“å‡º
#include &#34;string.h&#34;
/**
 * fcntl.hï¼Œæ˜¯unixæ ‡å‡†ä¸­é€šç”¨çš„å¤´æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«çš„ç›¸å…³å‡½æ•°æœ‰ openï¼Œfcntlï¼Œshutdownï¼Œunlinkï¼Œfcloseç­‰ï¼
 * å°±æ˜¯å®šä¹‰äº†æ–‡ä»¶æ“ä½œçš„å¸¸é‡
 */
#include &lt;fcntl.h&gt;
#include &#34;stdlib.h&#34;
/**
 * unistd.h æ˜¯ C å’Œ C++ ç¨‹åºè®¾è®¡è¯­è¨€ä¸­æä¾›å¯¹ POSIX æ“ä½œç³»ç»Ÿ API çš„è®¿é—®åŠŸèƒ½çš„å¤´æ–‡ä»¶çš„åç§°
 * unistd.h ä¸­æ‰€å®šä¹‰çš„æ¥å£é€šå¸¸éƒ½æ˜¯å¤§é‡é’ˆå¯¹ç³»ç»Ÿè°ƒç”¨çš„å°è£…ï¼ˆè‹±è¯­ï¼šwrapper functionsï¼‰ï¼Œå¦‚ forkã€pipe ä»¥åŠå„ç§ I/O åŸè¯­ï¼ˆreadã€writeã€close getpid() ç­‰ç­‰ï¼‰
 */
#include &#34;unistd.h&#34;
/**
 * æ˜¯Unix/Linuxç³»ç»Ÿçš„åŸºæœ¬ç³»ç»Ÿæ•°æ®ç±»å‹çš„å¤´æ–‡ä»¶ï¼Œå«æœ‰size_tï¼Œtime_tï¼Œpid_tç­‰ç±»å‹ã€‚
 */
#include &#34;sys/types.h&#34;
 
#define READ_SIZE 140
int main() {
 
    /*-------è·å–å½“å‰çš„è¿›ç¨‹id*/
    pid_t pt=getpid();//pid_tåœ¨sys/types.hä¸­ getpid()åœ¨unistd.hä¸­
    printf(&#34;å½“å‰ç¨‹åºçš„è¿›ç¨‹idï¼š%d\n&#34;,pt);
    /*-------æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦*/
    int fileDescp=open(&#34;c:/a1.txt&#34;,O_RDONLY);//openå‡½æ•°unistdä¸­ å¸¸é‡O_RDONLYå®šä¹‰åœ¨fcntl.h
    char s[READ_SIZE];
    memset(s,&#39;\0&#39;,READ_SIZE);//å°†æ‰€æœ‰çš„å­—èŠ‚åˆå§‹åŒ– \0
    /*-------è¯»å–æŒ‡å®šé•¿åº¦å­—èŠ‚*/
    //æ³¨æ„é¡¹ç›®è®¾ç½®çš„ä»€ä¹ˆå­—ç¬¦é›† è¯»å–æ–‡ä»¶æ—¶ å¦‚æœæ–‡ä»¶ä¸æ˜¯è¯¥å­—ç¬¦é›†å°±ä¼šè¯»å‡ºä¹±ç 
    read(fileDescp,s,READ_SIZE);
    printf(&#34;è¯»å–å­—ç¬¦ä¸²:%s\n&#34;,s);
    /*-------è¯»å–å…¨éƒ¨æ•°æ®*/
    lseek(fileDescp,SEEK_SET,0);//è®¾ç½®ä»0å¼€å§‹è¯»å–
    memset(s,&#39;\0&#39;,READ_SIZE);
    while((read(fileDescp,s,READ_SIZE))&gt;0){
        printf(&#34;è¯»å–åˆ°çš„æ•°æ® :%s\n&#34;,s);
    }
    /*-------å…³é—­æ–‡ä»¶æè¿°ç¬¦*/
    close(fileDescp);
    /*-------è¯»å–å…¨éƒ¨æ•°æ®*/
    //åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æŒ‡å®šæƒé™ æƒé™æ•°å­—å‚è€ƒ http://www.runoob.com/linux/linux-file-attr-permission.html
    int fd1 = creat(&#34;c:/test.log&#34;,777);
    write(fd1, s, strlen(s));
    close(fd1);
    //getchar();
    //return 0;
}</code></pre></div>
<p>2.è¿›ç¨‹æ“ä½œåº“</p>
<p>ã€‹ã€‹çˆ¶å­è¿›ç¨‹
Â </p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>#include  &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &#34;string.h&#34;
#include &lt;sys/unistd.h&gt;
#include &lt;sys/wait.h&gt;
void childProcessTest();
int main() {
    childProcessTest();
}
 
/**
 * æ¼”ç¤ºå­è¿›ç¨‹ä¾‹å­
 */
void childProcessTest(){
    //------------è·å–è¿›ç¨‹id
    pid_t pid=getpid();
    printf(&#34;è·å–å½“å‰è¿›ç¨‹id:%d\n&#34;,pid);
 
    int i=100;
    pid_t cpid;
    //------------fork()ä¼šåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ çˆ¶å­è¿›ç¨‹éƒ½ä¼šè°ƒç”¨fork çˆ¶è¿›ç¨‹è¿”å›å­è¿›ç¨‹çš„id å­è¿›ç¨‹=0
    //            æ³¨æ„å¦‚æœçˆ¶è¿›ç¨‹å…ˆè¿è¡Œå®Œ å­è¿›ç¨‹ä¹Ÿä¼šè‡ªåŠ¨åœæ­¢ ä¸ä¼šæ‰§è¡Œå®Œæˆä»£ç 
    //            è¿›ç¨‹å­è¿›ç¨‹ä¹‹å‰çš„å˜é‡éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ‹·è´ ä¸èƒ½å…±äº«
    /**
     * forkï¼ˆï¼‰ä¸vfockï¼ˆï¼‰éƒ½æ˜¯åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œé‚£ä»–ä»¬æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿæ€»ç»“æœ‰ä»¥ä¸‹ä¸‰ç‚¹åŒºåˆ«ï¼š
        1.  fork  ï¼ˆï¼‰ï¼šå­è¿›ç¨‹æ‹·è´çˆ¶è¿›ç¨‹çš„æ•°æ®æ®µï¼Œä»£ç æ®µ
            vfork ï¼ˆ ï¼‰ï¼šå­è¿›ç¨‹ä¸çˆ¶è¿›ç¨‹å…±äº«æ•°æ®æ®µ
        2.  fork ï¼ˆï¼‰çˆ¶å­è¿›ç¨‹çš„æ‰§è¡Œæ¬¡åºä¸ç¡®å®š
            vfork ä¿è¯å­è¿›ç¨‹å…ˆè¿è¡Œï¼Œåœ¨è°ƒç”¨exec æˆ–exit ä¹‹å‰ä¸çˆ¶è¿›ç¨‹æ•°æ®æ˜¯å…±äº«çš„,åœ¨å®ƒè°ƒç”¨exec
             æˆ–exit ä¹‹åçˆ¶è¿›ç¨‹æ‰å¯èƒ½è¢«è°ƒåº¦è¿è¡Œã€‚
     */
    if((cpid=fork())&gt;0){
        //çˆ¶è¿›ç¨‹æ‰§è¡Œ
        i++;
        printf(&#34;çˆ¶è¿›ç¨‹i=:%d\n&#34;,i);
        int status;
        //------------waitï¼ˆï¼‰å‡½æ•°åœ¨wait.hä¸­ ç­‰å¾…å­è¿›ç¨‹é€€å‡º ä¸€ç›´é˜»å¡ statuså¯ä»¥è·å–åˆ°å­è¿›ç¨‹ä¼ é€’çŠ¶æ€æ•°å­— é€šè¿‡WEXITSTATUSå®è½¬æ¢æ‰èƒ½è·å–åˆ°11
        //           waitpid(cpid,&amp;status,0); waitpidå‡è®¾æœ‰å¤šä¸ªå­è¿›ç¨‹çš„æƒ…å†µä¸‹å¯ä»¥ç­‰å¾…æŸä¸ªæŒ‡å®špidçš„å­è¿›ç¨‹
        pid_t cc=wait(&amp;status);
        printf(&#34;çˆ¶è¿›ç¨‹è·å–åˆ°å­è¿›ç¨‹%dçš„é€€å‡ºçŠ¶æ€ç :%d\n&#34;,cc,WEXITSTATUS(status));
    }else{
        //å­è¿›ç¨‹æ‰§è¡Œ
        //------------getppid()å–å¾—çˆ¶è¿›ç¨‹çš„è¿›ç¨‹è¯†åˆ«ç 
        printf(&#34;å­è¿›ç¨‹id:%d,å­è¿›ç¨‹è·å–çˆ¶è¿›ç¨‹id:%d\n&#34;,getpid(),getppid());
        //------------sleep()è®©è¿›ç¨‹æš‚åœæ‰§è¡Œä¸€æ®µæ—¶é—´ å•ä½ç§’
        sleep(3);
        i++;
        printf(&#34;å­è¿›ç¨‹i=:%d\n&#34;,i);
        //------------é€€å‡ºå½“å‰è¿›ç¨‹å°†å‚æ•°11è¿”å›ç»™çˆ¶çº¿ç¨‹ å¹¶ä¸”ä¼šä¼ é€’SIGCHLDä¿¡å·ç»™çˆ¶è¿›ç¨‹ï¼Œçˆ¶è¿›ç¨‹å¯ä»¥ç”±waitå‡½æ•°å–å¾—å­è¿›ç¨‹ç»“æŸçŠ¶æ€ã€‚
        exit(11);
    }
}</code></pre></div>
<p>ã€‹ã€‹systemå’Œexecæ—å‡½æ•°åŒºåˆ«
Â </p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>#include  &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &#34;string.h&#34;
#include &lt;sys/unistd.h&gt;
#include &lt;sys/wait.h&gt;
 
int main() {
    //system()ä¼šè°ƒç”¨fork()äº§ç”Ÿå­è¿›ç¨‹ï¼Œç”±å­è¿›ç¨‹æ¥è°ƒç”¨
    system(&#34;dir c:/&#34;);
 
    //----------execlå°†å½“å‰execlåé¢æ‰€æœ‰ä»£ç æ›¿æ¢æˆ execlæ‰§è¡Œ å†…å®¹ åé¢ä»£ç ä¸æ‰§è¡Œ ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»å…¨è·¯å¾„ å‚æ•°2è¡¨ç¤ºæ–‡ä»¶å å‚æ•°ä¸‰æ‰è¡¨ç¤ºç¬¬ä¸€ä¸ªå‚æ•°
    //execl(&#34;C:\\Windows\\System32\\notepad&#34;,&#34;notepad&#34;,&#34;c:/a.txt&#34;,NULL);
    //----------ä»PATH ç¯å¢ƒå˜é‡ä¸­æŸ¥æ‰¾æ–‡ä»¶å¹¶æ‰§è¡Œ ç¬¬ä¸€ä¸ªè·¯å¾„ä¸åŠ å…¨è·¯å¾„
    //execlp(&#34;notepad&#34;,&#34;notepad&#34;,&#34;c:/a.txt&#34;,NULL);
    //----------å’Œexelä¸€æ¨¡ä¸€æ · ä¸ä»pathä¸­æ‰¾ åªæœ‰ä¸¤ä¸ªå‚æ•° ç¬¬äºŒä¸ªå‚æ•°å®šä¹‰åœ¨ä¸€ä¸ªæ•°ç»„ä¸­
    char * args[]={&#34;notepad&#34;,&#34;c:/a.txt&#34;,NULL};
    execv(&#34;C:\\Windows\\System32\\notepad&#34;,args);
    printf(&#34;æµ‹è¯•æ˜¯å¦æ‰“å°&#34;);
 
}</code></pre></div>
<p>ã€‹ã€‹è¿›ç¨‹IPCï¼ˆè¿›ç¨‹é€šä¿¡ï¼‰</p>
<p>linuxå¸¸ç”¨çš„è¿›ç¨‹é—´çš„é€šè®¯æ–¹å¼</p>
<p>ï¼ˆ1ï¼‰ã€ç®¡é“(pipe)ï¼šç®¡é“å¯ç”¨äºå…·æœ‰äº²ç¼˜å…³ç³»çš„è¿›ç¨‹é—´çš„é€šä¿¡ï¼Œæ˜¯ä¸€ç§åŠåŒå·¥çš„æ–¹å¼ï¼Œæ•°æ®åªèƒ½å•å‘æµåŠ¨ï¼Œå…è®¸ä¸€ä¸ªè¿›ç¨‹å’Œå¦ä¸€ä¸ªä¸å®ƒæœ‰å…±åŒç¥–å…ˆçš„è¿›ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚</p>
<p>ï¼ˆ2ï¼‰ã€å‘½åç®¡é“(named pipe)ï¼šå‘½åç®¡é“å…‹æœäº†ç®¡é“æ²¡æœ‰åå­—çš„é™åˆ¶ï¼ŒåŒæ—¶é™¤äº†å…·æœ‰ç®¡é“çš„åŠŸèƒ½å¤–ï¼ˆä¹Ÿæ˜¯åŠåŒå·¥ï¼‰ï¼Œå®ƒè¿˜å…è®¸æ— äº²ç¼˜å…³ç³»è¿›ç¨‹é—´çš„é€šä¿¡ã€‚å‘½åç®¡é“åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­æœ‰å¯¹åº”çš„æ–‡ä»¶åã€‚å‘½åç®¡é“é€šè¿‡å‘½ä»¤mkfifoæˆ–ç³»ç»Ÿè°ƒç”¨mkfifoæ¥åˆ›å»ºã€‚</p>
<p>ï¼ˆ3ï¼‰ã€ä¿¡å·ï¼ˆsignalï¼‰ï¼šä¿¡å·æ˜¯æ¯”è¾ƒå¤æ‚çš„é€šä¿¡æ–¹å¼ï¼Œç”¨äºé€šçŸ¥æ¥æ”¶è¿›ç¨‹æœ‰æŸç§äº‹ä»¶å‘ç”Ÿäº†ï¼Œé™¤äº†è¿›ç¨‹é—´é€šä¿¡å¤–ï¼Œè¿›ç¨‹è¿˜å¯ä»¥å‘é€ä¿¡å·ç»™è¿›ç¨‹æœ¬èº«ï¼›linuxé™¤äº†æ”¯æŒUnixæ—©æœŸä¿¡å·è¯­ä¹‰å‡½æ•°sigalå¤–ï¼Œè¿˜æ”¯æŒè¯­ä¹‰ç¬¦åˆPosix.1æ ‡å‡†çš„ä¿¡å·å‡½æ•°sigactionï¼ˆå®é™…ä¸Šï¼Œè¯¥å‡½æ•°æ˜¯åŸºäºBSDçš„ï¼ŒBSDä¸ºäº†å®ç°å¯é ä¿¡å·æœºåˆ¶ï¼Œåˆèƒ½å¤Ÿç»Ÿä¸€å¯¹å¤–æ¥å£ï¼Œç”¨sigactionå‡½æ•°é‡æ–°å®ç°äº†signalå‡½æ•°ï¼‰ã€‚</p>
<p>ï¼ˆ4ï¼‰ã€æ¶ˆæ¯é˜Ÿåˆ—ï¼šæ¶ˆæ¯é˜Ÿåˆ—æ˜¯æ¶ˆæ¯çš„é“¾æ¥è¡¨ï¼ŒåŒ…æ‹¬Posixæ¶ˆæ¯é˜Ÿåˆ—system Væ¶ˆæ¯é˜Ÿåˆ—ã€‚æœ‰è¶³å¤Ÿæƒé™çš„è¿›ç¨‹å¯ä»¥å‘é˜Ÿåˆ—ä¸­æ·»åŠ æ¶ˆæ¯ï¼Œè¢«èµ‹äºˆè¯»æƒé™çš„è¿›ç¨‹åˆ™å¯ä»¥è¯»èµ°é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ã€‚æ¶ˆæ¯é˜Ÿåˆ—å…‹æœäº†ä¿¡å·æ‰¿è½½ä¿¡æ¯é‡å°‘ï¼Œç®¡é“åªèƒ½æ‰¿è½½æ— æ ¼å¼å­—èŠ‚æµä»¥åŠç¼“å†²åŒºå¤§å°å—é™ç­‰ç¼º</p>
<p>ï¼ˆ5ï¼‰ã€å…±äº«å†…å­˜ï¼šä½¿å¾—å¤šä¸ªè¿›ç¨‹å¯ä»¥è®¿é—®åŒä¸€å—å†…å­˜ç©ºé—´ï¼Œæ˜¯æœ€å¿«çš„å¯ç”¨IPCå½¢å¼ã€‚æ˜¯é’ˆå¯¹å…¶ä»–é€šä¿¡æœºåˆ¶è¿è¡Œæ•ˆç‡è¾ƒä½è€Œè®¾è®¡çš„ã€‚å¾€å¾€ä¸å…¶å®ƒé€šä¿¡æœºåˆ¶ï¼Œå¦‚ä¿¡å·é‡ç»“åˆä½¿ç”¨ï¼Œæ¥è¾¾åˆ°è¿›ç¨‹é—´çš„åŒæ­¥åŠäº’æ–¥ã€‚</p>
<p>ï¼ˆ6ï¼‰ã€å†…å­˜æ˜ å°„ï¼šå†…å­˜æ˜ å°„å…è®¸ä»»ä½•å¤šä¸ªè¿›ç¨‹é—´é€šä¿¡ï¼Œæ¯ä¸€ä¸ªä½¿ç”¨è¯¥æœºåˆ¶çš„è¿›ç¨‹é€šè¿‡æŠŠä¸€ä¸ªå…±äº«çš„æ–‡ä»¶æ˜ å°„åˆ°è‡ªå·±çš„è¿›ç¨‹åœ°å€ç©ºé—´æ¥å®ç°å®ƒã€‚</p>
<p>ï¼ˆ7ï¼‰ã€ä¿¡å·é‡ï¼ˆsemaphoreï¼‰ï¼šä¸»è¦ä½œä¸ºè¿›ç¨‹é—´ä»¥åŠåŒä¸€è¿›ç¨‹ä¸åŒçº¿ç¨‹ä¹‹é—´çš„åŒæ­¥æ‰‹æ®µã€‚</p>
<p>ï¼ˆ8ï¼‰ã€å¥—æ¥å­—ï¼ˆSocketï¼‰ï¼šæ›´ä¸ºä¸€èˆ¬çš„è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ï¼Œå¯ç”¨äºä¸åŒæœºå™¨ä¹‹é—´çš„è¿›ç¨‹é—´é€šä¿¡ã€‚èµ·åˆæ˜¯ç”±Unixç³»ç»Ÿçš„BSDåˆ†æ”¯å¼€å‘å‡ºæ¥çš„ï¼Œä½†ç°åœ¨ä¸€èˆ¬å¯ä»¥ç§»æ¤åˆ°å…¶å®ƒç±»Unixç³»ç»Ÿä¸Šï¼šLinuxå’ŒSystem Vçš„å˜ç§éƒ½æ”¯æŒå¥—æ¥å­—ã€‚</p>
<p>ä»£ç å†™äº†å‰5ä¸ªÂ </p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>#include  &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &#34;string.h&#34;
#include &lt;sys/unistd.h&gt;
#include &lt;sys/wait.h&gt;
#include &lt;errno.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;sys/fcntl.h&gt;
 
#include &lt;sys/types.h&gt;
#include &lt;sys/msg.h&gt;
#include &lt;sys/ipc.h&gt;
#include &lt;sys/shm.h&gt;
#include &lt;sys/mman.h&gt;
#define BSIZE 200
#define FIFO &#34;c:/alink&#34;
 
 
/**
 * (1)æ— åç®¡é“
 *  ç”¨äºå…·æœ‰äº²ç¼˜å…³ç³»çˆ¶å­çš„è¿›ç¨‹é—´çš„é€šä¿¡ï¼Œæ˜¯ä¸€ç§åŠåŒå·¥çš„æ–¹å¼ï¼Œæ•°æ®åªèƒ½å•å‘æµåŠ¨ï¼Œå…è®¸ä¸€ä¸ªè¿›ç¨‹å’Œå¦ä¸€ä¸ªä¸å®ƒæœ‰å…±åŒç¥–å…ˆçš„è¿›ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡
 *   pipe (int __fildes[2]); äº§ç”Ÿç®¡é“ æ•°ç»„0è¯»ç®¡é“ï¼Œ æ•°ç»„1è¡¨ç¤ºå†™ç®¡é“
 *   è¿™é‡Œæ¨¡æ‹Ÿçˆ¶è¿›ç¨‹ç»™å­è¿›ç¨‹å†™å…¥ä¸€ä¸ªhello my son
 */
void pipeTest(){
 
    int __fildes[2];
    pipe(__fildes);
    pid_t  pid;
    char buffer[BSIZE];
    //çˆ¶å­è¿›ç¨‹éƒ½ä¼šæœ‰è¯»å†™ç®¡é“çš„æ‹·è´
    if((pid=fork())&gt;0){//çˆ¶è¿›ç¨‹å†™ å…³é—­è¯»çš„ç®¡é“
        close(__fildes[0]);
        memset(buffer,&#39;\0&#39;,BSIZE);
        char* writeChar=&#34;hello my å„¿å­&#34;;
        memcpy(buffer,writeChar, strlen(writeChar));
        write(__fildes[1],buffer,BSIZE);
        close(__fildes[1]);
        wait(NULL);
 
    }else{//å­è¿›ç¨‹è¯» å…³é—­å†™çš„ç®¡é“
        sleep(2);
        close(__fildes[1]);
        read(__fildes[0],buffer,BSIZE);
        printf(&#34;å­è¿›ç¨‹è¯»å–åˆ°æ•°æ®:%s&#34;,buffer);
        close(__fildes[0]);
 
    }
}
/**
 * ï¼ˆ2ï¼‰ç®¡é“å…‹æœäº†ç®¡é“æ²¡æœ‰åå­—çš„é™åˆ¶ï¼ŒåŒæ—¶é™¤äº†å…·æœ‰ç®¡é“çš„åŠŸèƒ½å¤–ï¼ˆä¹Ÿæ˜¯åŠåŒå·¥ï¼‰ï¼Œå®ƒè¿˜å…è®¸æ— äº²ç¼˜å…³ç³»è¿›ç¨‹é—´çš„é€šä¿¡ã€‚
 * å‘½åç®¡é“åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­æœ‰å¯¹åº”çš„æ–‡ä»¶åã€‚å‘½åç®¡é“é€šè¿‡å‘½ä»¤mkfifoæˆ–ç³»ç»Ÿè°ƒç”¨mkfifoæ¥åˆ›å»ºã€‚
 * è¿™é‡Œæ¨¡æ‹Ÿçˆ¶è¿›ç¨‹ç»™å­è¿›ç¨‹å†™å…¥ä¸€ä¸ªhello my son
 * @return
 */
void namePipeTest(){
    //-------------unlink()ä¼šåˆ é™¤å‚æ•°pathnameæŒ‡å®šçš„æ–‡ä»¶ã€‚å¦‚æœè¯¥æ–‡ä»¶åä¸ºæœ€åè¿æ¥ç‚¹ï¼Œä½†æœ‰å…¶ä»–è¿›ç¨‹æ‰“å¼€äº†æ­¤æ–‡ä»¶ï¼Œåˆ™åœ¨æ‰€æœ‰å…³äºæ­¤æ–‡ä»¶çš„æ–‡ä»¶æè¿°è¯çš†å…³é—­åæ‰ä¼šåˆ é™¤ã€‚å¦‚æœå‚æ•°pathnameä¸ºä¸€ç¬¦å·è¿æ¥ï¼Œåˆ™æ­¤è¿æ¥ä¼šè¢«åˆ é™¤ã€‚
    //è¿”å›å€¼ æˆåŠŸåˆ™è¿”å›0ï¼Œå¤±è´¥è¿”å›-1ï¼Œé”™è¯¯åŸå› å­˜äºerrno
    unlink(FIFO);
    if(errno==EROFS){
        printf(&#34;æ–‡ä»¶å­˜åœ¨äºåªè¯»æ–‡ä»¶ç³»ç»Ÿå†…&#34;);
    }
    //--------------mkfifoæ³¨æ„åœ¨ &lt;sys/stat.h&gt;å¤´æ–‡ä»¶ä¸­
    /*
    kfifo()ä¼šä¾å‚æ•°pathnameå»ºç«‹ç‰¹æ®Šçš„FIFOæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å¿…é¡»ä¸å­˜åœ¨ï¼Œè€Œå‚æ•°modeä¸ºè¯¥æ–‡ä»¶çš„æƒé™ï¼ˆmode%~umaskï¼‰ï¼Œå› æ­¤umaskå€¼ä¹Ÿä¼šå½±å“åˆ°FIFOæ–‡ä»¶çš„æƒé™ã€‚Mkfifo()å»ºç«‹çš„FIFOæ–‡ä»¶å…¶ä»–è¿›ç¨‹éƒ½å¯ä»¥ç”¨è¯»å†™ä¸€èˆ¬æ–‡ä»¶çš„æ–¹å¼å­˜å–ã€‚å½“ä½¿ç”¨open()æ¥æ‰“å¼€FIFOæ–‡ä»¶æ—¶ï¼ŒO_NONBLOCKæ——æ ‡ä¼šæœ‰å½±å“
    fifoç±»ä¼¼äºé˜Ÿåˆ— é˜»å¡é˜Ÿåˆ— æ²¡æœ‰æ•°æ®è¯» é»˜è®¤é˜»å¡ç­‰åˆ°æœ‰æ•°æ®å†™å…¥ O_NONBLOCKè¡¨ç¤ºä¸é˜»å¡
     1ã€å½“ä½¿ç”¨O_NONBLOCK æ——æ ‡æ—¶ï¼Œæ‰“å¼€FIFO æ–‡ä»¶æ¥è¯»å–çš„æ“ä½œä¼šç«‹åˆ»è¿”å›ï¼Œä½†æ˜¯è‹¥è¿˜æ²¡æœ‰å…¶ä»–è¿›ç¨‹æ‰“å¼€FIFO æ–‡ä»¶æ¥è¯»å–ï¼Œåˆ™å†™å…¥çš„æ“ä½œä¼šè¿”å›ENXIO é”™è¯¯ä»£ç ã€‚
    2ã€æ²¡æœ‰ä½¿ç”¨O_NONBLOCK æ——æ ‡æ—¶ï¼Œæ‰“å¼€FIFO æ¥è¯»å–çš„æ“ä½œä¼šç­‰åˆ°å…¶ä»–è¿›ç¨‹æ‰“å¼€FIFOæ–‡ä»¶æ¥å†™å…¥æ‰æ­£å¸¸è¿”å›ã€‚åŒæ ·åœ°ï¼Œæ‰“å¼€FIFOæ–‡ä»¶æ¥å†™å…¥çš„æ“ä½œä¼šç­‰åˆ°å…¶ä»–è¿›ç¨‹æ‰“å¼€FIFO æ–‡ä»¶æ¥è¯»å–åæ‰æ­£å¸¸è¿”å›ã€‚
 
     æ‰“å¼€ç®¡é“å¤±è´¥ï¼Œä¸€èˆ¬è¦æ³¨æ„æ‰“å¼€çš„æ–¹å¼ï¼Œä¸€èˆ¬ä¸èƒ½ä»¥è¯»å†™æ–¹å¼æ‰“å¼€ï¼Œè¦ä¹ˆåªè¯»æ‰“å¼€ï¼Œè¦ä¹ˆåªå†™æ‰“å¼€
      ä¸€å®šæ˜¯æœ‰è¯»çš„ç®¡é“æ‰“å¼€æ‰èƒ½æœ‰å†™çš„ç®¡é“
 
     */
    mkfifo(FIFO,0777);//å…¶å®å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶è€Œå·² å¿…é¡»ä½¿ç”¨å…«è¿›åˆ¶çš„0777
    pid_t  pid;
    char buffer[BSIZE];
    //æ¨¡æ‹Ÿæƒ…æ™¯è®©çˆ¶è¿›ç¨‹æš‚åœ1ç§’ å­è¿›ç¨‹æ‰“å¼€äº†è¯»çš„ç®¡é“ï¼ˆä¸€å®šè¦å…ˆæ‰“å¼€è¯»ç®¡é“å¦åˆ™æ— æ³•æ“ä½œï¼‰ æ¥ä¸‹æ¥å­è¿›ç¨‹ä¼‘æ¯2s çˆ¶è¿›ç¨‹å¼€å§‹å†™å…¥æ•°æ® å­è¿›ç¨‹ç­‰å¾…å®Œæˆå è¯»å–ç®¡é“æ•°æ®
    if((pid=fork())&gt;0) {//çˆ¶è¿›ç¨‹å†™ å…³é—­è¯»çš„ç®¡é“
        sleep(1);
        int fd=open(FIFO,O_WRONLY|O_NONBLOCK);
        printf(&#34;æ–‡ä»¶æè¿°ç¬¦:%d\n&#34;,fd);
        memset(buffer,&#39;\0&#39;,BSIZE);
        char* writeChar=&#34;hello my å„¿å­&#34;;
        memcpy(buffer,writeChar, strlen(writeChar));
        write(fd,buffer,BSIZE);
        close(fd);
        wait(NULL);
    }else{
        int fd=open(FIFO,O_RDONLY|O_NONBLOCK);
        sleep(2);
        printf(&#34;æ–‡ä»¶æè¿°ç¬¦:%d\n&#34;,fd);
        read(fd,buffer,BSIZE);
        printf(&#34;å­è¿›ç¨‹è¯»å–åˆ°æ•°æ®:%s\n&#34;,buffer);
        close(fd);
    }
}
void handler(int sig){
    if(sig==SIGINT){
        printf(&#34;æ¥å—åˆ°ä¸­æ–­æŒ‡ä»¤&#34;);
    }
}
/**
 * ï¼ˆ3ï¼‰ã€ä¿¡å·ï¼ˆsignalï¼‰ï¼šä¿¡å·æ˜¯æ¯”è¾ƒå¤æ‚çš„é€šä¿¡æ–¹å¼ï¼Œç”¨äºé€šçŸ¥æ¥æ”¶è¿›ç¨‹æœ‰æŸç§äº‹ä»¶å‘ç”Ÿäº†ï¼Œé™¤äº†è¿›ç¨‹é—´é€šä¿¡å¤–ï¼Œè¿›ç¨‹è¿˜å¯ä»¥å‘é€ä¿¡å·ç»™è¿›ç¨‹æœ¬èº«ï¼›
 *   linuxé™¤äº†æ”¯æŒUnixæ—©æœŸä¿¡å·è¯­ä¹‰å‡½æ•°sigalå¤–ï¼Œè¿˜æ”¯æŒè¯­ä¹‰ç¬¦åˆPosix.1æ ‡å‡†çš„ä¿¡å·å‡½æ•°sigactionï¼ˆå®é™…ä¸Šï¼Œè¯¥å‡½æ•°æ˜¯åŸºäºBSDçš„ï¼ŒBSDä¸ºäº†å®ç°å¯é ä¿¡å·æœºåˆ¶ï¼Œ
 *  åˆèƒ½å¤Ÿç»Ÿä¸€å¯¹å¤–æ¥å£ï¼Œç”¨sigactionå‡½æ•°é‡æ–°å®ç°äº†signalå‡½æ•°ï¼‰ã€‚
 *  ctrl-c æ˜¯å‘é€ SIGINT ä¿¡å·ï¼Œç»ˆæ­¢ä¸€ä¸ªè¿›ç¨‹ï¼›è¿›ç¨‹æ— æ³•å†é‡ç»­ã€‚
    ctrl-z æ˜¯å‘é€ SIGSTOPä¿¡å·ï¼ŒæŒ‚èµ·ä¸€ä¸ªè¿›ç¨‹ï¼›è¿›ç¨‹ä»å‰å°è½¬å…¥åå°å¹¶æš‚åœï¼Œå¯ä»¥ç”¨bgä½¿å…¶åå°ç»§ç»­è¿è¡Œï¼Œfgä½¿å…¶è½¬å…¥å‰å°è¿è¡Œã€‚
    ctrl-\ å‘é€ SIGQUIT ä¿¡å·ç»™å‰å°è¿›ç¨‹ç»„ä¸­çš„æ‰€æœ‰è¿›ç¨‹ï¼Œç»ˆæ­¢å‰å°è¿›ç¨‹å¹¶ç”Ÿæˆ core æ–‡ä»¶ã€‚
 
    SIGINT
      ç¨‹åºç»ˆæ­¢(interrupt)ä¿¡å·, åœ¨ç”¨æˆ·é”®å…¥INTRå­—ç¬¦(é€šå¸¸æ˜¯Ctrl-C)æ—¶å‘å‡ºï¼Œç”¨äºé€šçŸ¥å‰å°è¿›ç¨‹ç»„ç»ˆæ­¢è¿›ç¨‹ã€‚
    SIGQUIT
    å’ŒSIGINTç±»ä¼¼, ä½†ç”±QUITå­—ç¬¦(é€šå¸¸æ˜¯Ctrl-\)æ¥æ§åˆ¶. è¿›ç¨‹åœ¨å› æ”¶åˆ°SIGQUITé€€å‡ºæ—¶ä¼šäº§ç”Ÿcoreæ–‡ä»¶, åœ¨è¿™ä¸ªæ„ä¹‰ä¸Šç±»ä¼¼äºä¸€ä¸ªç¨‹åºé”™è¯¯ä¿¡å·ã€‚
  1 SIGTERM
    ç¨‹åºç»“æŸ(terminate)ä¿¡å·, ä¸SIGKILLä¸åŒçš„æ˜¯è¯¥ä¿¡å·å¯ä»¥è¢«é˜»å¡å’Œå¤„ç†ã€‚é€šå¸¸ç”¨æ¥è¦æ±‚ç¨‹åºè‡ªå·±æ­£å¸¸é€€å‡ºï¼Œshellå‘½ä»¤killç¼ºçœäº§ç”Ÿè¿™ä¸ªä¿¡å·ã€‚å¦‚æœè¿›ç¨‹ç»ˆæ­¢ä¸äº†ï¼Œæˆ‘ä»¬æ‰ä¼šå°è¯•SIGKILLã€‚
   SIGSTOP
    åœæ­¢(stopped)è¿›ç¨‹çš„æ‰§è¡Œ. æ³¨æ„å®ƒå’Œterminateä»¥åŠinterruptçš„åŒºåˆ«:è¯¥è¿›ç¨‹è¿˜æœªç»“æŸ, åªæ˜¯æš‚åœæ‰§è¡Œ. æœ¬ä¿¡å·ä¸èƒ½è¢«é˜»å¡, å¤„ç†æˆ–å¿½ç•¥.
 
   æ¨¡æ‹Ÿçˆ¶çº¿ç¨‹ç­‰å¾…ä¿¡å· å­çº¿ç¨‹å‘é€ä¸€ä¸ªä¿¡å· æˆ–è€…åœ¨linuxä½¿ç”¨ kill -s SIGINT è¿›ç¨‹å· æˆ–è€… ctrl+cä¸­æ–­
 */
void signTest(){
    pid_t  pid;
    char buffer[BSIZE];
    if((pid=fork())&gt;0) {//çˆ¶è¿›ç¨‹å†™ å…³é—­è¯»çš„ç®¡é“
        signal(SIGINT,handler);//SIGINTä¿¡å·ç»‘å®šåˆ°è¿™ä¸ªå‡½æ•° è‡ªåŠ¨å›è°ƒ
        pause();//æš‚åœç­‰å¾…ä¿¡å·
    }else{
        sleep(1);
        kill(getppid(),SIGINT);
    }
 
}
 
struct MsgS{
    long mtype;
    char data[100];
};
/**
 * ï¼ˆ4ï¼‰ã€æ¶ˆæ¯é˜Ÿåˆ—ï¼šæ¶ˆæ¯é˜Ÿåˆ—æ˜¯æ¶ˆæ¯çš„é“¾æ¥è¡¨ï¼ŒåŒ…æ‹¬Posixæ¶ˆæ¯é˜Ÿåˆ—system Væ¶ˆæ¯é˜Ÿåˆ—ã€‚æœ‰è¶³å¤Ÿæƒé™çš„è¿›ç¨‹å¯ä»¥å‘é˜Ÿåˆ—ä¸­æ·»åŠ æ¶ˆæ¯ï¼Œ
 * è¢«èµ‹äºˆè¯»æƒé™çš„è¿›ç¨‹åˆ™å¯ä»¥è¯»èµ°é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ã€‚æ¶ˆæ¯é˜Ÿåˆ—å…‹æœäº†ä¿¡å·æ‰¿è½½ä¿¡æ¯é‡å°‘ï¼Œç®¡é“åªèƒ½æ‰¿è½½æ— æ ¼å¼å­—èŠ‚æµä»¥åŠç¼“å†²åŒºå¤§å°å—é™ç­‰ç¼º
 *
 */
void msgQueueTest(){
    //char* path=&#34;/bkey&#34;
    //creat(path,0777);
    //key_t  k=ftok(path,2);//æ–‡ä»¶å¿…é¡»å­˜åœ¨æ‰èƒ½åˆ›å»ºæˆåŠŸkey
    //printf(&#34;è·å–åˆ°çš„key:%d\n&#34;,k);
    struct MsgS msg;
    //è¿™é‡Œé‡ç‚¹æ³¨æ„ msgget  cygwinæ²¡æœ‰å®ç° è¿”å› 88çš„errorno å»linuxä¸‹ç¼–è¯‘è¿è¡Œæ‰èƒ½æ­£å¸¸ å¦åˆ™qidä¸€ç›´æ˜¯-1
    int qid=msgget(IPC_PRIVATE,IPC_CREAT|0644);//msg.hå¤´æ–‡ä»¶ä¸­å®šä¹‰  ftokäº§ç”Ÿä¸€ä¸ªæˆ–è€…ä½¿ç”¨IPC_PRIVATE
    printf(&#34;é”™è¯¯number :%d\n&#34;,errno);
    printf(&#34;æ¶ˆæ¯é˜Ÿåˆ—ç¼–å·:%d\n&#34;,qid);//å¿…é¡»æ˜¯å¤§äº0çš„æ•°å­—æ‰æ˜¯åˆ›å»ºæˆåŠŸçš„
    pid_t  pid;
    char buffer[BSIZE];
    if((pid=fork())&gt;0) {//çˆ¶è¿›ç¨‹å†™
        sleep(2);
        //å‘é€ä¸¤ä¸ªæ¶ˆæ¯
        msg.mtype=2;//æ³¨æ„è¿™é‡Œå®šä¹‰ç±»å‹ä¸º2
        strcpy(msg.data,&#34;hello child&#34;);
        int flag =msgsnd(qid,&amp;msg,sizeof(struct MsgS),0);
        if ( flag &lt; 0 )
        {
            perror(&#34;send message error&#34;) ;
            return  ;
        }
        struct MsgS msg1;
        msg1.mtype=1;//è¿™é‡Œç±»å‹æ˜¯1
        strcpy(msg1.data,&#34;hello child1&#34;);
        msgsnd(qid,&amp;msg1,sizeof(struct MsgS),0);
        if ( flag &lt; 0 )
        {
            perror(&#34;send message error&#34;) ;
            return  ;
        }
    }else{
        //æŒ‡å®šæ¥å—ç±»å‹ä¸º1çš„æ‰€ä»¥ è¾“å‡ºhello child1
        msgrcv(qid,&amp;msg,sizeof(struct MsgS),1,0);//çœ‹å…¶ä»–äººå†™çš„å‡å»ç±»å‹longçš„é•¿åº¦ sizeof(struct MsgS) -sizeof(long) ä¸æ˜ç™½ å‡ä¸å‡éƒ½ok
        printf(&#34;æ¥å—åˆ°æ¶ˆæ¯:%s\n&#34;,msg.data);
 
    }
}
 
/**
 * ï¼ˆ5ï¼‰ã€å…±äº«å†…å­˜ï¼šä½¿å¾—å¤šä¸ªè¿›ç¨‹å¯ä»¥è®¿é—®åŒä¸€å—å†…å­˜ç©ºé—´ï¼Œæ˜¯æœ€å¿«çš„å¯ç”¨IPCå½¢å¼ã€‚æ˜¯é’ˆå¯¹å…¶ä»–é€šä¿¡æœºåˆ¶è¿è¡Œæ•ˆç‡è¾ƒä½è€Œè®¾è®¡çš„ã€‚
 * å¾€å¾€ä¸å…¶å®ƒé€šä¿¡æœºåˆ¶ï¼Œå¦‚ä¿¡å·é‡ç»“åˆä½¿ç”¨ï¼Œæ¥è¾¾åˆ°è¿›ç¨‹é—´çš„åŒæ­¥åŠäº’æ–¥ã€‚
 */
void testShareMemory(){
    char path[200];
#ifdef __linux
    strcpy(path,&#34;/mykey&#34;);
#endif
#ifdef WINVER
    strcpy(path,&#34;c:/mykey&#34;);
#endif
    printf(&#34;è·¯å¾„æ˜¯:%s\n&#34;,path);
    creat(path,0644);
    key_t kt;
    kt=ftok(path,2);
    //åˆ›å»ºä¸€ç‰‡å…±äº«å†…å­˜ å¤§å°:100
    int shmid=shmget(kt,100,IPC_CREAT|0644);//åœ¨å¤´æ–‡ä»¶ sys/shm.h  cygwinæœªå®ç°
    printf(&#34;keyæ˜¯:%dï¼Œå…±äº«å†…å­˜id:%d\n&#34;,kt,shmid);
    printf(&#34;é”™è¯¯ç¼–å·:%d\n&#34;,errno);
    pid_t  pid;
    char buffer[BSIZE];
 
    if((pid=fork())&gt;0) {
        //shmatå‡½æ•°çš„ä½œç”¨å°±æ˜¯ç”¨æ¥å¯åŠ¨å¯¹è¯¥å…±äº«å†…å­˜çš„è®¿é—®ï¼Œå¹¶æŠŠå…±äº«å†…å­˜è¿æ¥åˆ°å½“å‰è¿›ç¨‹çš„åœ°å€ç©ºé—´ è¿”å›å…±äº«å†…å­˜çš„ç¬¬ä¸€ä¸ªä½ç½®çš„æŒ‡é’ˆ
        void* addr=shmat(shmid,NULL,0);
        strcpy((char*)addr,&#34;hello child&#34;);
    }else{
        sleep(2);
        void* addr=shmat(shmid,NULL,0);
        printf(&#34;å…±äº«æ•°æ®ï¼š%s\n&#34;,(char*)addr);
    }
}</code></pre></div>
<p>ã€‹ã€‹çº¿ç¨‹</p>
<p>çº¿ç¨‹æ˜¯å¯ç‹¬ç«‹è¿è¡Œçš„å•å…ƒ ç›¸å¯¹äºè¿›ç¨‹æ¥è¯´ æ›´åŠ è½»é‡çº§ ä¼˜ç‚¹å¦‚ä¸‹ï¼š</p>
<p>åœ¨å¼€é”€æ–¹é¢ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ç‹¬ç«‹çš„ä»£ç å’Œæ•°æ®ç©ºé—´ï¼ˆç¨‹åºä¸Šä¸‹æ–‡ï¼‰ï¼Œç¨‹åºä¹‹é—´çš„åˆ‡æ¢ä¼šæœ‰è¾ƒå¤§çš„å¼€é”€ï¼›çº¿ç¨‹å¯ä»¥çœ‹åšè½»é‡çº§çš„è¿›ç¨‹ï¼ŒåŒä¸€ç±»çº¿ç¨‹å…±äº«ä»£ç å’Œæ•°æ®ç©ºé—´ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„è¿è¡Œæ ˆå’Œç¨‹åºè®¡æ•°å™¨ï¼ˆPCï¼‰ï¼Œçº¿ç¨‹ä¹‹é—´åˆ‡æ¢çš„å¼€é”€å°ã€‚</p>
<p>å†…å­˜åˆ†é…æ–¹é¢ï¼šç³»ç»Ÿåœ¨è¿è¡Œçš„æ—¶å€™ä¼šä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸åŒçš„å†…å­˜ç©ºé—´ï¼›è€Œå¯¹çº¿ç¨‹è€Œè¨€ï¼Œé™¤äº†CPUå¤–ï¼Œç³»ç»Ÿä¸ä¼šä¸ºçº¿ç¨‹åˆ†é…å†…å­˜ï¼ˆçº¿ç¨‹æ‰€ä½¿ç”¨çš„èµ„æºæ¥è‡ªå…¶æ‰€å±è¿›ç¨‹çš„èµ„æºï¼‰ï¼Œçº¿ç¨‹ç»„ä¹‹é—´åªèƒ½å…±äº«èµ„æºã€‚</p>
<p>åŒ…å«å…³ç³»ï¼šæ²¡æœ‰çº¿ç¨‹çš„è¿›ç¨‹å¯ä»¥çœ‹åšæ˜¯å•çº¿ç¨‹çš„ï¼Œå¦‚æœä¸€ä¸ªè¿›ç¨‹å†…æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œåˆ™æ‰§è¡Œè¿‡ç¨‹ä¸æ˜¯ä¸€æ¡çº¿çš„ï¼Œè€Œæ˜¯å¤šæ¡çº¿ï¼ˆçº¿ç¨‹ï¼‰å…±åŒå®Œæˆçš„ï¼›çº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥çº¿ç¨‹ä¹Ÿè¢«ç§°ä¸ºè½»æƒè¿›ç¨‹æˆ–è€…è½»é‡çº§è¿›ç¨‹ã€‚
Â </p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>#include  &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &#34;string.h&#34;
#include &lt;sys/unistd.h&gt;
#include &lt;pthread.h&gt;
 
#define BSIZE 200
#define FIFO &#34;c:/alink&#34;
 
void* myfun(void * a){
    printf(&#34;çº¿ç¨‹è¢«æ‰§è¡Œ\n&#34;);
}
/**
 * linuxç¼–è¯‘æ—¶ æŒ‡å®š pthreadçš„é™æ€åº“ gcc th.c -lpthread -o th
 * clionä¸­ä¸éœ€è¦é“¾æ¥é™æ€åº“
 * @param p
 * @param arg
 * @return
 */
 int main(int p,char* arg[]) {
    pthread_t pt;
    int err=pthread_create(&amp;pt,NULL,myfun,NULL);
    printf(&#34;çº¿ç¨‹id:%d\n&#34;,pt);
    if(err != 0){
         printf(&#34;can&#39;t create thread: %s\n&#34;,strerror(err));
         return 1;
    }
    //pthread_cancel(pt); å–æ¶ˆçº¿ç¨‹
    //pthread_join(pt,NULL);ç­‰å¾…çº¿ç¨‹æ‰§è¡Œå®Œæˆå åœ¨å¾€åæ‰§è¡Œ
    sleep(2);
 }</code></pre></div>
<p>ç½‘ç»œç¼–ç¨‹Â </p>
<p>å®šä¹‰ä¸€ä¸ªsocketæœåŠ¡ ç›‘å¬ 8888ç«¯å£ä½¿ç”¨tenlnetè¿æ¥å‘é€æ•°æ®</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>#include  &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &#34;string.h&#34;
#include &#34;errno.h&#34;
#include &#34;errno.h&#34;
#include &lt;sys/unistd.h&gt;
#include &lt;pthread.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;netinet/in.h&gt;
#include &#34;arpa/inet.h&#34;;
#define BSIZE 200
#define FIFO &#34;c:/alink&#34;
 
void* myfun(void * a){
    printf(&#34;çº¿ç¨‹è¢«æ‰§è¡Œ\n&#34;);
}
/**
 * linuxç¼–è¯‘æ—¶ æŒ‡å®š pthreadçš„é™æ€åº“ gcc th.c -lpthread -o th
 * clionä¸­ä¸éœ€è¦é“¾æ¥é™æ€åº“
 * @param p
 * @param arg
 * @return
 */
 int main(int p,char* arg[]) {
 
     //ç³»ç»Ÿç”³è¯·socket è¿”å›sockfdæ–‡ä»¶æè¿°ç¬¦
     int sockfd=socket(AF_INET,SOCK_STREAM,0);//å®šä¹‰åœ¨#include &lt;sys/socket.h&gt;
     struct sockaddr_in servaddr;//å®šä¹‰åœ¨&lt;netinet/in.h&gt;
     servaddr.sin_addr.s_addr=htonl(INADDR_ANY);//ç»‘å®šæœ¬æœºæ‰€æœ‰ip
     servaddr.sin_port=htons(8888);//ç»‘å®šç«¯å£
     servaddr.sin_family=AF_INET;
     //å°†ç«¯å£ç»‘å®šåˆ°sock
     if(bind(sockfd,&amp;servaddr, sizeof(servaddr))&lt;0){
         perror(strerror(errno));
     }
     //å¼€å§‹ç›‘å¬ ç¬¬äºŒä¸ªå‚æ•°å…è®¸æœ€å¤§è¿æ¥æ•°
     if(listen(sockfd,10)&lt;0){
         perror(strerror(errno));
     }
    //æ¥å—è¯·æ±‚
    while(1){
        struct sockaddr_in client;
        socklen_t len=sizeof(client);
        int connfd=accept(sockfd,( struct sockaddr_in* )&amp;client,(socklen_t*)&amp;len);//ä¼šé˜»å¡ ç­‰å¾…ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥
        printf(&#34;%s\n&#34;,strerror(errno));
        printf(&#34;æ¥å—åˆ°è¿æ¥:%d å®¢æˆ·ç«¯çš„ip:%s&#34;,connfd,inet_ntoa(client.sin_addr));//inet_ntoaåœ¨ #include &#34;arpa/inet.h&#34;;
        fflush(stdout);
        char buffer[ 10 ];
        ssize_t rsize=recv(connfd,buffer,9,0 );
        printf(&#34;æ¥å—åˆ°æ¶ˆæ¯:%s æ¥å—åˆ°çš„é•¿åº¦æ˜¯ï¼š%d&#34;,buffer,rsize);
        fflush(stdout);
        sleep(1);
    }
    close(sockfd);
 
 }</code></pre></div>

  <footer class="footline">
              <i class='fa-fw fas fa-calendar'></i> Sep 18, 2025
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
          <a id="R-logo" class="R-default" href="/docs/index.html">
            <div class="logo-title">liaomin416100569åšå®¢</div>
          </a>
        </div>
        <search><form action="/docs/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
            <li class="" data-nav-id="/docs/index.html"><a class="padding" href="/docs/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="parent " data-nav-id="/docs/programming/index.html"><a class="padding" href="/docs/programming/index.html">ç¼–ç¨‹å¼€å‘</a><ul id="R-subsections-e3fc01b477dbaf64a8f5013a3dab5c5b" class="collapsible-menu">
            <li class="parent alwaysopen " data-nav-id="/docs/programming/languages/index.html"><a class="padding" href="/docs/programming/languages/index.html">ç¼–ç¨‹è¯­è¨€</a><ul id="R-subsections-1bbde7fb0c312ba940b425df5a4caf67" class="collapsible-menu">
            <li class="parent alwaysopen " data-nav-id="/docs/programming/languages/gcc/index.html"><a class="padding" href="/docs/programming/languages/gcc/index.html">cè¯­è¨€</a><ul id="R-subsections-e8c9b5cff4c7849bafc19d21e0433f7f" class="collapsible-menu">
            <li class="" data-nav-id="/docs/programming/languages/gcc/linuxgcc_01/index.html"><a class="padding" href="/docs/programming/languages/gcc/linuxgcc_01/index.html">linuxä¸‹gccç¼–ç¨‹01-gccå·¥å…·å®‰è£…å’Œä½¿ç”¨</a></li>
            <li class="" data-nav-id="/docs/programming/languages/gcc/linuxgcc_02/index.html"><a class="padding" href="/docs/programming/languages/gcc/linuxgcc_02/index.html">linuxä¸‹gccç¼–ç¨‹02-gdbè°ƒè¯•å·¥å…·ä½¿ç”¨</a></li>
            <li class="" data-nav-id="/docs/programming/languages/gcc/linuxgcc_03/index.html"><a class="padding" href="/docs/programming/languages/gcc/linuxgcc_03/index.html">linuxä¸‹gccç¼–ç¨‹03-makeå·¥ç¨‹ç®¡ç†</a></li>
            <li class="" data-nav-id="/docs/programming/languages/gcc/linuxgcc_04/index.html"><a class="padding" href="/docs/programming/languages/gcc/linuxgcc_04/index.html">linuxä¸‹gccç¼–ç¨‹04-cmakeå·¥ç¨‹ç®¡ç†</a></li>
            <li class="" data-nav-id="/docs/programming/languages/gcc/linuxgcc_05/index.html"><a class="padding" href="/docs/programming/languages/gcc/linuxgcc_05/index.html">linuxä¸‹gccç¼–ç¨‹05-windowä¸‹å¼€å‘å·¥å…·å®‰è£…</a></li>
            <li class="" data-nav-id="/docs/programming/languages/gcc/linuxgcc_06/index.html"><a class="padding" href="/docs/programming/languages/gcc/linuxgcc_06/index.html">linuxä¸‹gccç¼–ç¨‹06-cè¯­è¨€å‚è€ƒæ‰‹å†Œ</a></li>
            <li class="active " data-nav-id="/docs/programming/languages/gcc/linuxgcc_07/index.html"><a class="padding" href="/docs/programming/languages/gcc/linuxgcc_07/index.html">linuxä¸‹gccç¼–ç¨‹07-ä½¿ç”¨linuxä¸‹cåº“å‡½æ•°</a></li>
            <li class="" data-nav-id="/docs/programming/languages/gcc/linuxgcc_08/index.html"><a class="padding" href="/docs/programming/languages/gcc/linuxgcc_08/index.html">linuxä¸‹gccç¼–ç¨‹08-ç¼–è¯‘linuxå†…æ ¸</a></li>
            <li class="" data-nav-id="/docs/programming/languages/gcc/linuxgcc_09/index.html"><a class="padding" href="/docs/programming/languages/gcc/linuxgcc_09/index.html">linuxä¸‹gccç¼–ç¨‹09-ç¼–å†™å†…æ ¸helloworldæ¨¡å—</a></li>
            <li class="" data-nav-id="/docs/programming/languages/gcc/linuxgcc_10/index.html"><a class="padding" href="/docs/programming/languages/gcc/linuxgcc_10/index.html">linuxä¸‹gccç¼–ç¨‹10-clionç¼–è¯‘è°ƒè¯•nginx</a></li>
            <li class="" data-nav-id="/docs/programming/languages/gcc/linuxgcc_11/index.html"><a class="padding" href="/docs/programming/languages/gcc/linuxgcc_11/index.html">linuxä¸‹gccç¼–ç¨‹11-windowä¸‹clionç¼–è¯‘è°ƒè¯•nginx&#43;é›†æˆlua-nginx-module&#43;å®‰è£…å¼€æºx-waf</a></li>
            <li class="" data-nav-id="/docs/programming/languages/gcc/linuxgcc_12/index.html"><a class="padding" href="/docs/programming/languages/gcc/linuxgcc_12/index.html">linuxä¸‹gccç¼–ç¨‹12-windowä¸‹clionç¼–è¯‘è°ƒè¯•redis7.0</a></li></ul></li>
            <li class="alwaysopen " data-nav-id="/docs/programming/languages/assembly/index.html"><a class="padding" href="/docs/programming/languages/assembly/index.html">æ±‡ç¼–è¯­è¨€</a><ul id="R-subsections-664e07814ed6bbd77b351b341bff28e6" class="collapsible-menu"></ul></li></ul></li>
            <li class="alwaysopen " data-nav-id="/docs/programming/ai/index.html"><a class="padding" href="/docs/programming/ai/index.html">äººå·¥æ™ºèƒ½</a><ul id="R-subsections-9d06be7bd8c736c09a65fb0b91b71d0e" class="collapsible-menu"></ul></li>
            <li class="alwaysopen " data-nav-id="/docs/programming/plugins/index.html"><a class="padding" href="/docs/programming/plugins/index.html">æ’ä»¶å¼€å‘</a><ul id="R-subsections-de66f54cff99288ca68bfcb5bb0439ae" class="collapsible-menu"></ul></li></ul></li>
            <li class="" data-nav-id="/docs/devops/index.html"><a class="padding" href="/docs/devops/index.html">è¿ç»´ä¸€ä½“åŒ–</a><ul id="R-subsections-389d4feb4920b919bcbc0b1e9947dace" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/docs/security/index.html"><a class="padding" href="/docs/security/index.html">å®‰å…¨æ”»é˜²</a><ul id="R-subsections-66815ecaaecfc1c209e5637d03b258b2" class="collapsible-menu"></ul></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
          </ul>
        </div>
<div id="R-footer"><p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p></div>
      </div>
    </aside>
    <script src="/docs/js/clipboard/clipboard.min.js?1758355652" defer></script>
    <script src="/docs/js/perfect-scrollbar/perfect-scrollbar.min.js?1758355652" defer></script>
    <script src="/docs/js/theme.min.js?1758355652" defer></script>
  </body>
</html>
