<!DOCTYPE html>
<html lang="zh" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.150.0">
    <meta name="generator" content="Relearn 8.0.1+b23cf6629eada0c2802f34ae4012e04343497862">
    <meta name="description" content="ç®€å•æ¦‚è¿° é€šè¿‡linuxçš„è™šæ‹Ÿç½‘ç»œéš”ç¦»ï¼Œæ¥æ¨¡æ‹Ÿç†Ÿæ‚‰äº¤æ¢æœºï¼Œè·¯ç”±å™¨ï¼Œç½‘å¡,ç½‘æ¡¥ç­‰ç‰©ç†è®¾å¤‡é—´çš„å…³ç³»å’ŒåŒºåˆ«ã€‚ ä»¥ä¸‹å‡ ä¸ªæ¦‚å¿µï¼š
network namespaceï¼šå®ç°ç½‘ç»œè™šæ‹ŸåŒ–çš„é‡è¦åŠŸèƒ½ï¼Œå®ƒèƒ½åˆ›å»ºå¤šä¸ªéš”ç¦»çš„ç½‘ç»œç©ºé—´ï¼Œå®ƒä»¬æœ‰ç‹¬è‡ªçš„ç½‘ç»œæ ˆä¿¡æ¯ã€‚ä¸ç®¡æ˜¯è™šæ‹Ÿæœºè¿˜æ˜¯å®¹å™¨ï¼Œè¿è¡Œçš„æ—¶å€™ä»¿ä½›è‡ªå·±å°±åœ¨ç‹¬ç«‹çš„ç½‘ç»œä¸­ã€‚ vethï¼šVETH(Virtual Ethernet )æ˜¯Linuxæä¾›çš„å¦å¤–ä¸€ç§ç‰¹æ®Šçš„ç½‘ç»œè®¾å¤‡ï¼Œä¸­æ–‡ç§°ä¸ºè™šæ‹Ÿç½‘å¡æ¥å£ã€‚å®ƒæ€»æ˜¯æˆå¯¹å‡ºç°ï¼Œè¦åˆ›å»ºå°±åˆ›å»ºä¸€ä¸ªpairã€‚ä¸€ä¸ªPairä¸­çš„vethå°±åƒä¸€ä¸ªç½‘ç»œçº¿ç¼†çš„ä¸¤ä¸ªç«¯ç‚¹ï¼Œæ•°æ®ä»ä¸€ä¸ªç«¯ç‚¹è¿›å…¥ï¼Œå¿…ç„¶ä»å¦å¤–ä¸€ä¸ªç«¯ç‚¹æµå‡ºã€‚æ¯ä¸ªvethéƒ½å¯ä»¥è¢«èµ‹äºˆIPåœ°å€ï¼Œå¹¶å‚ä¸ä¸‰å±‚ç½‘ç»œè·¯ç”±è¿‡ç¨‹ï¼Œå¯ä»¥å®ç°ä¸åŒnetnsä¹‹é—´ç½‘ç»œé€šä¿¡ã€‚ ç‰©ç†ç½‘å¡æ˜¯æœåŠ¡å™¨ä¸Šå®é™…çš„ç½‘ç»œæ¥å£è®¾å¤‡ï¼šç‰©ç†ç½‘å¡æŒ‡çš„æ˜¯æœåŠ¡å™¨ä¸Šå®é™…çš„ç½‘ç»œæ¥å£è®¾å¤‡ï¼Œé€šè¿‡ip linkå¯æŸ¥çœ‹è®¾å¤‡ï¼Œå…¶ä¸­eth0ä¸€èˆ¬æ˜¯ç¬¬ä¸€ä¸ªç½‘å¡ï¼Œethnè¡¨ç¤ºç¬¬nä¸ª,é€šè¿‡ip addressæŸ¥çœ‹ipåœ°å€ã€‚ liaomin@DESKTOP-FSEDE3P:~$ ip link16: eth0: &lt;BROADCAST,MULTICAST,UP&gt; mtu 1500 group default qlen 1link/ether 78:24:af:33:df:1120: eth1: &lt;BROADCAST,MULTICAST,UP&gt; mtu 1500 group default qlen 1link/ether 7a:15:df:c5:e6:d51: lo: &lt;LOOPBACK,UP&gt; mtu 1500 group default qlen 1link/loopback 00:00:00:00:00:00 ç½‘æ¡¥ï¼šæ˜¯ä¸€ç§è™šæ‹Ÿè®¾å¤‡ï¼Œå¯ä»¥å°† Linux å†…éƒ¨å¤šä¸ªç½‘ç»œæ¥å£è¿æ¥èµ·æ¥ï¼Œä¸€ä¸ªç½‘ç»œæ¥å£æ¥æ”¶åˆ°ç½‘ç»œæ•°æ®åŒ…åï¼Œä¼šå¤åˆ¶åˆ°å…¶ä»–ç½‘ç»œæ¥å£ä¸­ï¼ŒBridge æ˜¯äºŒå±‚è®¾å¤‡ï¼Œä»…ç”¨æ¥å¤„ç†äºŒå±‚çš„é€šè®¯ã€‚Bridge ä½¿ç”¨ MAC åœ°å€è¡¨æ¥å†³å®šæ€ä¹ˆè½¬å‘å¸§ï¼ˆFrameï¼‰ã€‚Bridge ä¼šä» host ä¹‹é—´çš„é€šè®¯æ•°æ®åŒ…ä¸­å­¦ä¹  MAC åœ°å€ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“ç½‘ç»œæ¥å£Aæ¥æ”¶åˆ°æ•°æ®åŒ…åï¼Œç½‘æ¡¥ ä¼šå°†æ•°æ®åŒ…å¤åˆ¶å¹¶ä¸”å‘é€ç»™è¿æ¥åˆ° ç½‘æ¡¥ çš„å…¶ä»–ç½‘ç»œæ¥å£ï¼ˆå¦‚ä¸Šå›¾ä¸­çš„ç½‘å¡Bå’Œç½‘å¡Cï¼‰ã€‚">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="è®¡ç®—æœºç½‘ç»œåŸºç¡€02-linuxè™šæ‹Ÿç½‘ç»œéš”ç¦»ï¼ˆç½‘æ¡¥bridgeï¼Œè·¯ç”±ï¼Œè™šæ‹Ÿç½‘å¡vethï¼‰ :: liaomin416100569åšå®¢">
    <meta name="twitter:description" content="ç®€å•æ¦‚è¿° é€šè¿‡linuxçš„è™šæ‹Ÿç½‘ç»œéš”ç¦»ï¼Œæ¥æ¨¡æ‹Ÿç†Ÿæ‚‰äº¤æ¢æœºï¼Œè·¯ç”±å™¨ï¼Œç½‘å¡,ç½‘æ¡¥ç­‰ç‰©ç†è®¾å¤‡é—´çš„å…³ç³»å’ŒåŒºåˆ«ã€‚ ä»¥ä¸‹å‡ ä¸ªæ¦‚å¿µï¼š
network namespaceï¼šå®ç°ç½‘ç»œè™šæ‹ŸåŒ–çš„é‡è¦åŠŸèƒ½ï¼Œå®ƒèƒ½åˆ›å»ºå¤šä¸ªéš”ç¦»çš„ç½‘ç»œç©ºé—´ï¼Œå®ƒä»¬æœ‰ç‹¬è‡ªçš„ç½‘ç»œæ ˆä¿¡æ¯ã€‚ä¸ç®¡æ˜¯è™šæ‹Ÿæœºè¿˜æ˜¯å®¹å™¨ï¼Œè¿è¡Œçš„æ—¶å€™ä»¿ä½›è‡ªå·±å°±åœ¨ç‹¬ç«‹çš„ç½‘ç»œä¸­ã€‚ vethï¼šVETH(Virtual Ethernet )æ˜¯Linuxæä¾›çš„å¦å¤–ä¸€ç§ç‰¹æ®Šçš„ç½‘ç»œè®¾å¤‡ï¼Œä¸­æ–‡ç§°ä¸ºè™šæ‹Ÿç½‘å¡æ¥å£ã€‚å®ƒæ€»æ˜¯æˆå¯¹å‡ºç°ï¼Œè¦åˆ›å»ºå°±åˆ›å»ºä¸€ä¸ªpairã€‚ä¸€ä¸ªPairä¸­çš„vethå°±åƒä¸€ä¸ªç½‘ç»œçº¿ç¼†çš„ä¸¤ä¸ªç«¯ç‚¹ï¼Œæ•°æ®ä»ä¸€ä¸ªç«¯ç‚¹è¿›å…¥ï¼Œå¿…ç„¶ä»å¦å¤–ä¸€ä¸ªç«¯ç‚¹æµå‡ºã€‚æ¯ä¸ªvethéƒ½å¯ä»¥è¢«èµ‹äºˆIPåœ°å€ï¼Œå¹¶å‚ä¸ä¸‰å±‚ç½‘ç»œè·¯ç”±è¿‡ç¨‹ï¼Œå¯ä»¥å®ç°ä¸åŒnetnsä¹‹é—´ç½‘ç»œé€šä¿¡ã€‚ ç‰©ç†ç½‘å¡æ˜¯æœåŠ¡å™¨ä¸Šå®é™…çš„ç½‘ç»œæ¥å£è®¾å¤‡ï¼šç‰©ç†ç½‘å¡æŒ‡çš„æ˜¯æœåŠ¡å™¨ä¸Šå®é™…çš„ç½‘ç»œæ¥å£è®¾å¤‡ï¼Œé€šè¿‡ip linkå¯æŸ¥çœ‹è®¾å¤‡ï¼Œå…¶ä¸­eth0ä¸€èˆ¬æ˜¯ç¬¬ä¸€ä¸ªç½‘å¡ï¼Œethnè¡¨ç¤ºç¬¬nä¸ª,é€šè¿‡ip addressæŸ¥çœ‹ipåœ°å€ã€‚ liaomin@DESKTOP-FSEDE3P:~$ ip link16: eth0: &lt;BROADCAST,MULTICAST,UP&gt; mtu 1500 group default qlen 1link/ether 78:24:af:33:df:1120: eth1: &lt;BROADCAST,MULTICAST,UP&gt; mtu 1500 group default qlen 1link/ether 7a:15:df:c5:e6:d51: lo: &lt;LOOPBACK,UP&gt; mtu 1500 group default qlen 1link/loopback 00:00:00:00:00:00 ç½‘æ¡¥ï¼šæ˜¯ä¸€ç§è™šæ‹Ÿè®¾å¤‡ï¼Œå¯ä»¥å°† Linux å†…éƒ¨å¤šä¸ªç½‘ç»œæ¥å£è¿æ¥èµ·æ¥ï¼Œä¸€ä¸ªç½‘ç»œæ¥å£æ¥æ”¶åˆ°ç½‘ç»œæ•°æ®åŒ…åï¼Œä¼šå¤åˆ¶åˆ°å…¶ä»–ç½‘ç»œæ¥å£ä¸­ï¼ŒBridge æ˜¯äºŒå±‚è®¾å¤‡ï¼Œä»…ç”¨æ¥å¤„ç†äºŒå±‚çš„é€šè®¯ã€‚Bridge ä½¿ç”¨ MAC åœ°å€è¡¨æ¥å†³å®šæ€ä¹ˆè½¬å‘å¸§ï¼ˆFrameï¼‰ã€‚Bridge ä¼šä» host ä¹‹é—´çš„é€šè®¯æ•°æ®åŒ…ä¸­å­¦ä¹  MAC åœ°å€ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“ç½‘ç»œæ¥å£Aæ¥æ”¶åˆ°æ•°æ®åŒ…åï¼Œç½‘æ¡¥ ä¼šå°†æ•°æ®åŒ…å¤åˆ¶å¹¶ä¸”å‘é€ç»™è¿æ¥åˆ° ç½‘æ¡¥ çš„å…¶ä»–ç½‘ç»œæ¥å£ï¼ˆå¦‚ä¸Šå›¾ä¸­çš„ç½‘å¡Bå’Œç½‘å¡Cï¼‰ã€‚">
    <meta property="og:url" content="https://jiaozi789.github.io/docs/devops/networking/basic/net_basic_02/index.html">
    <meta property="og:site_name" content="liaomin416100569åšå®¢">
    <meta property="og:title" content="è®¡ç®—æœºç½‘ç»œåŸºç¡€02-linuxè™šæ‹Ÿç½‘ç»œéš”ç¦»ï¼ˆç½‘æ¡¥bridgeï¼Œè·¯ç”±ï¼Œè™šæ‹Ÿç½‘å¡vethï¼‰ :: liaomin416100569åšå®¢">
    <meta property="og:description" content="ç®€å•æ¦‚è¿° é€šè¿‡linuxçš„è™šæ‹Ÿç½‘ç»œéš”ç¦»ï¼Œæ¥æ¨¡æ‹Ÿç†Ÿæ‚‰äº¤æ¢æœºï¼Œè·¯ç”±å™¨ï¼Œç½‘å¡,ç½‘æ¡¥ç­‰ç‰©ç†è®¾å¤‡é—´çš„å…³ç³»å’ŒåŒºåˆ«ã€‚ ä»¥ä¸‹å‡ ä¸ªæ¦‚å¿µï¼š
network namespaceï¼šå®ç°ç½‘ç»œè™šæ‹ŸåŒ–çš„é‡è¦åŠŸèƒ½ï¼Œå®ƒèƒ½åˆ›å»ºå¤šä¸ªéš”ç¦»çš„ç½‘ç»œç©ºé—´ï¼Œå®ƒä»¬æœ‰ç‹¬è‡ªçš„ç½‘ç»œæ ˆä¿¡æ¯ã€‚ä¸ç®¡æ˜¯è™šæ‹Ÿæœºè¿˜æ˜¯å®¹å™¨ï¼Œè¿è¡Œçš„æ—¶å€™ä»¿ä½›è‡ªå·±å°±åœ¨ç‹¬ç«‹çš„ç½‘ç»œä¸­ã€‚ vethï¼šVETH(Virtual Ethernet )æ˜¯Linuxæä¾›çš„å¦å¤–ä¸€ç§ç‰¹æ®Šçš„ç½‘ç»œè®¾å¤‡ï¼Œä¸­æ–‡ç§°ä¸ºè™šæ‹Ÿç½‘å¡æ¥å£ã€‚å®ƒæ€»æ˜¯æˆå¯¹å‡ºç°ï¼Œè¦åˆ›å»ºå°±åˆ›å»ºä¸€ä¸ªpairã€‚ä¸€ä¸ªPairä¸­çš„vethå°±åƒä¸€ä¸ªç½‘ç»œçº¿ç¼†çš„ä¸¤ä¸ªç«¯ç‚¹ï¼Œæ•°æ®ä»ä¸€ä¸ªç«¯ç‚¹è¿›å…¥ï¼Œå¿…ç„¶ä»å¦å¤–ä¸€ä¸ªç«¯ç‚¹æµå‡ºã€‚æ¯ä¸ªvethéƒ½å¯ä»¥è¢«èµ‹äºˆIPåœ°å€ï¼Œå¹¶å‚ä¸ä¸‰å±‚ç½‘ç»œè·¯ç”±è¿‡ç¨‹ï¼Œå¯ä»¥å®ç°ä¸åŒnetnsä¹‹é—´ç½‘ç»œé€šä¿¡ã€‚ ç‰©ç†ç½‘å¡æ˜¯æœåŠ¡å™¨ä¸Šå®é™…çš„ç½‘ç»œæ¥å£è®¾å¤‡ï¼šç‰©ç†ç½‘å¡æŒ‡çš„æ˜¯æœåŠ¡å™¨ä¸Šå®é™…çš„ç½‘ç»œæ¥å£è®¾å¤‡ï¼Œé€šè¿‡ip linkå¯æŸ¥çœ‹è®¾å¤‡ï¼Œå…¶ä¸­eth0ä¸€èˆ¬æ˜¯ç¬¬ä¸€ä¸ªç½‘å¡ï¼Œethnè¡¨ç¤ºç¬¬nä¸ª,é€šè¿‡ip addressæŸ¥çœ‹ipåœ°å€ã€‚ liaomin@DESKTOP-FSEDE3P:~$ ip link16: eth0: &lt;BROADCAST,MULTICAST,UP&gt; mtu 1500 group default qlen 1link/ether 78:24:af:33:df:1120: eth1: &lt;BROADCAST,MULTICAST,UP&gt; mtu 1500 group default qlen 1link/ether 7a:15:df:c5:e6:d51: lo: &lt;LOOPBACK,UP&gt; mtu 1500 group default qlen 1link/loopback 00:00:00:00:00:00 ç½‘æ¡¥ï¼šæ˜¯ä¸€ç§è™šæ‹Ÿè®¾å¤‡ï¼Œå¯ä»¥å°† Linux å†…éƒ¨å¤šä¸ªç½‘ç»œæ¥å£è¿æ¥èµ·æ¥ï¼Œä¸€ä¸ªç½‘ç»œæ¥å£æ¥æ”¶åˆ°ç½‘ç»œæ•°æ®åŒ…åï¼Œä¼šå¤åˆ¶åˆ°å…¶ä»–ç½‘ç»œæ¥å£ä¸­ï¼ŒBridge æ˜¯äºŒå±‚è®¾å¤‡ï¼Œä»…ç”¨æ¥å¤„ç†äºŒå±‚çš„é€šè®¯ã€‚Bridge ä½¿ç”¨ MAC åœ°å€è¡¨æ¥å†³å®šæ€ä¹ˆè½¬å‘å¸§ï¼ˆFrameï¼‰ã€‚Bridge ä¼šä» host ä¹‹é—´çš„é€šè®¯æ•°æ®åŒ…ä¸­å­¦ä¹  MAC åœ°å€ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“ç½‘ç»œæ¥å£Aæ¥æ”¶åˆ°æ•°æ®åŒ…åï¼Œç½‘æ¡¥ ä¼šå°†æ•°æ®åŒ…å¤åˆ¶å¹¶ä¸”å‘é€ç»™è¿æ¥åˆ° ç½‘æ¡¥ çš„å…¶ä»–ç½‘ç»œæ¥å£ï¼ˆå¦‚ä¸Šå›¾ä¸­çš„ç½‘å¡Bå’Œç½‘å¡Cï¼‰ã€‚">
    <meta property="og:locale" content="zh">
    <meta property="og:type" content="article">
    <meta property="article:section" content="è¿ç»´ä¸€ä½“åŒ–">
    <meta property="article:published_time" content="2025-09-18T16:55:17+08:00">
    <meta property="article:modified_time" content="2025-09-18T16:55:17+08:00">
    <meta itemprop="name" content="è®¡ç®—æœºç½‘ç»œåŸºç¡€02-linuxè™šæ‹Ÿç½‘ç»œéš”ç¦»ï¼ˆç½‘æ¡¥bridgeï¼Œè·¯ç”±ï¼Œè™šæ‹Ÿç½‘å¡vethï¼‰ :: liaomin416100569åšå®¢">
    <meta itemprop="description" content="ç®€å•æ¦‚è¿° é€šè¿‡linuxçš„è™šæ‹Ÿç½‘ç»œéš”ç¦»ï¼Œæ¥æ¨¡æ‹Ÿç†Ÿæ‚‰äº¤æ¢æœºï¼Œè·¯ç”±å™¨ï¼Œç½‘å¡,ç½‘æ¡¥ç­‰ç‰©ç†è®¾å¤‡é—´çš„å…³ç³»å’ŒåŒºåˆ«ã€‚ ä»¥ä¸‹å‡ ä¸ªæ¦‚å¿µï¼š
network namespaceï¼šå®ç°ç½‘ç»œè™šæ‹ŸåŒ–çš„é‡è¦åŠŸèƒ½ï¼Œå®ƒèƒ½åˆ›å»ºå¤šä¸ªéš”ç¦»çš„ç½‘ç»œç©ºé—´ï¼Œå®ƒä»¬æœ‰ç‹¬è‡ªçš„ç½‘ç»œæ ˆä¿¡æ¯ã€‚ä¸ç®¡æ˜¯è™šæ‹Ÿæœºè¿˜æ˜¯å®¹å™¨ï¼Œè¿è¡Œçš„æ—¶å€™ä»¿ä½›è‡ªå·±å°±åœ¨ç‹¬ç«‹çš„ç½‘ç»œä¸­ã€‚ vethï¼šVETH(Virtual Ethernet )æ˜¯Linuxæä¾›çš„å¦å¤–ä¸€ç§ç‰¹æ®Šçš„ç½‘ç»œè®¾å¤‡ï¼Œä¸­æ–‡ç§°ä¸ºè™šæ‹Ÿç½‘å¡æ¥å£ã€‚å®ƒæ€»æ˜¯æˆå¯¹å‡ºç°ï¼Œè¦åˆ›å»ºå°±åˆ›å»ºä¸€ä¸ªpairã€‚ä¸€ä¸ªPairä¸­çš„vethå°±åƒä¸€ä¸ªç½‘ç»œçº¿ç¼†çš„ä¸¤ä¸ªç«¯ç‚¹ï¼Œæ•°æ®ä»ä¸€ä¸ªç«¯ç‚¹è¿›å…¥ï¼Œå¿…ç„¶ä»å¦å¤–ä¸€ä¸ªç«¯ç‚¹æµå‡ºã€‚æ¯ä¸ªvethéƒ½å¯ä»¥è¢«èµ‹äºˆIPåœ°å€ï¼Œå¹¶å‚ä¸ä¸‰å±‚ç½‘ç»œè·¯ç”±è¿‡ç¨‹ï¼Œå¯ä»¥å®ç°ä¸åŒnetnsä¹‹é—´ç½‘ç»œé€šä¿¡ã€‚ ç‰©ç†ç½‘å¡æ˜¯æœåŠ¡å™¨ä¸Šå®é™…çš„ç½‘ç»œæ¥å£è®¾å¤‡ï¼šç‰©ç†ç½‘å¡æŒ‡çš„æ˜¯æœåŠ¡å™¨ä¸Šå®é™…çš„ç½‘ç»œæ¥å£è®¾å¤‡ï¼Œé€šè¿‡ip linkå¯æŸ¥çœ‹è®¾å¤‡ï¼Œå…¶ä¸­eth0ä¸€èˆ¬æ˜¯ç¬¬ä¸€ä¸ªç½‘å¡ï¼Œethnè¡¨ç¤ºç¬¬nä¸ª,é€šè¿‡ip addressæŸ¥çœ‹ipåœ°å€ã€‚ liaomin@DESKTOP-FSEDE3P:~$ ip link16: eth0: &lt;BROADCAST,MULTICAST,UP&gt; mtu 1500 group default qlen 1link/ether 78:24:af:33:df:1120: eth1: &lt;BROADCAST,MULTICAST,UP&gt; mtu 1500 group default qlen 1link/ether 7a:15:df:c5:e6:d51: lo: &lt;LOOPBACK,UP&gt; mtu 1500 group default qlen 1link/loopback 00:00:00:00:00:00 ç½‘æ¡¥ï¼šæ˜¯ä¸€ç§è™šæ‹Ÿè®¾å¤‡ï¼Œå¯ä»¥å°† Linux å†…éƒ¨å¤šä¸ªç½‘ç»œæ¥å£è¿æ¥èµ·æ¥ï¼Œä¸€ä¸ªç½‘ç»œæ¥å£æ¥æ”¶åˆ°ç½‘ç»œæ•°æ®åŒ…åï¼Œä¼šå¤åˆ¶åˆ°å…¶ä»–ç½‘ç»œæ¥å£ä¸­ï¼ŒBridge æ˜¯äºŒå±‚è®¾å¤‡ï¼Œä»…ç”¨æ¥å¤„ç†äºŒå±‚çš„é€šè®¯ã€‚Bridge ä½¿ç”¨ MAC åœ°å€è¡¨æ¥å†³å®šæ€ä¹ˆè½¬å‘å¸§ï¼ˆFrameï¼‰ã€‚Bridge ä¼šä» host ä¹‹é—´çš„é€šè®¯æ•°æ®åŒ…ä¸­å­¦ä¹  MAC åœ°å€ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“ç½‘ç»œæ¥å£Aæ¥æ”¶åˆ°æ•°æ®åŒ…åï¼Œç½‘æ¡¥ ä¼šå°†æ•°æ®åŒ…å¤åˆ¶å¹¶ä¸”å‘é€ç»™è¿æ¥åˆ° ç½‘æ¡¥ çš„å…¶ä»–ç½‘ç»œæ¥å£ï¼ˆå¦‚ä¸Šå›¾ä¸­çš„ç½‘å¡Bå’Œç½‘å¡Cï¼‰ã€‚">
    <meta itemprop="datePublished" content="2025-09-18T16:55:17+08:00">
    <meta itemprop="dateModified" content="2025-09-18T16:55:17+08:00">
    <meta itemprop="wordCount" content="2921">
    <title>è®¡ç®—æœºç½‘ç»œåŸºç¡€02-linuxè™šæ‹Ÿç½‘ç»œéš”ç¦»ï¼ˆç½‘æ¡¥bridgeï¼Œè·¯ç”±ï¼Œè™šæ‹Ÿç½‘å¡vethï¼‰ :: liaomin416100569åšå®¢</title>
    <link href="/docs/css/auto-complete/auto-complete.min.css?1758355652" rel="stylesheet">
    <script src="/docs/js/auto-complete/auto-complete.min.js?1758355652" defer></script>
    <script src="/docs/js/search-lunr.min.js?1758355652" defer></script>
    <script src="/docs/js/search.min.js?1758355652" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/docs/searchindex.en.js?1758355652";
    </script>
    <script src="/docs/js/lunr/lunr.min.js?1758355652" defer></script>
    <script src="/docs/js/lunr/lunr.stemmer.support.min.js?1758355652" defer></script>
    <script src="/docs/js/lunr/lunr.multi.min.js?1758355652" defer></script>
    <script src="/docs/js/lunr/lunr.zh.min.js?1758355652" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['zh'];
    </script>
    <link href="/docs/fonts/fontawesome/css/fontawesome-all.min.css?1758355652" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/docs/fonts/fontawesome/css/fontawesome-all.min.css?1758355652" rel="stylesheet"></noscript>
    <link href="/docs/css/perfect-scrollbar/perfect-scrollbar.min.css?1758355652" rel="stylesheet">
    <link href="/docs/css/theme.min.css?1758355652" rel="stylesheet">
    <link href="/docs/css/format-html.min.css?1758355652" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/devops\/networking\/basic\/net_basic_02\/index.html';
      window.relearn.relBasePath='..\/..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..\/..';
      window.relearn.absBaseUri='https:\/\/jiaozi789.github.io\/docs';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=false;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'auto' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
    <link href="/docs/css/custom.css?1758355652" rel="stylesheet">
  </head>
  <body class="mobile-support html" data-url="/docs/devops/networking/basic/net_basic_02/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#ç®€å•æ¦‚è¿°">ç®€å•æ¦‚è¿°</a></li>
    <li><a href="#ç¯å¢ƒæ¨¡æ‹Ÿ">ç¯å¢ƒæ¨¡æ‹Ÿ</a></li>
    <li><a href="#network-ns">network ns</a>
      <ul>
        <li><a href="#ç½‘ç»œè™šæ‹ŸåŒ–">ç½‘ç»œè™šæ‹ŸåŒ–</a>
          <ul>
            <li><a href="#ç½‘ç»œé—´é€šè®¯">ç½‘ç»œé—´é€šè®¯</a>
              <ul>
                <li><a href="#è™šæ‹Ÿç½‘å¡">è™šæ‹Ÿç½‘å¡</a></li>
                <li><a href="#ç½‘æ¡¥">ç½‘æ¡¥</a></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/docs/index.html"><span itemprop="name">liaomin416100569åšå®¢</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/docs/devops/index.html"><span itemprop="name">è¿ç»´ä¸€ä½“åŒ–</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/docs/devops/networking/index.html"><span itemprop="name">ç½‘ç»œæŠ€æœ¯</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/docs/devops/networking/basic/index.html"><span itemprop="name">ç½‘ç»œåŸºç¡€</span></a><meta itemprop="position" content="4">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">è®¡ç®—æœºç½‘ç»œåŸºç¡€02-linuxè™šæ‹Ÿç½‘ç»œéš”ç¦»ï¼ˆç½‘æ¡¥bridgeï¼Œè·¯ç”±ï¼Œè™šæ‹Ÿç½‘å¡vethï¼‰</span><meta itemprop="position" content="5"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/docs/devops/networking/basic/net_basic_01/index.html" title="è®¡ç®—æœºç½‘ç»œåŸºç¡€01-IPåœ°å€ç›¸å…³çŸ¥è¯† (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/docs/devops/networking/packet_capture/index.html" title="ç½‘ç»œæŠ“åŒ… (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable devops" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="è®¡ç®—æœºç½‘ç»œåŸºç¡€02-linuxè™šæ‹Ÿç½‘ç»œéš”ç¦»ç½‘æ¡¥bridgeè·¯ç”±è™šæ‹Ÿç½‘å¡veth">è®¡ç®—æœºç½‘ç»œåŸºç¡€02-linuxè™šæ‹Ÿç½‘ç»œéš”ç¦»ï¼ˆç½‘æ¡¥bridgeï¼Œè·¯ç”±ï¼Œè™šæ‹Ÿç½‘å¡vethï¼‰</h1>

<script>
window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$','$$'], ['\\[','\\]']]
  }
};
</script>
<script id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>

<h1 id="ç®€å•æ¦‚è¿°">ç®€å•æ¦‚è¿°</h1>
<p>é€šè¿‡linuxçš„è™šæ‹Ÿç½‘ç»œéš”ç¦»ï¼Œæ¥æ¨¡æ‹Ÿç†Ÿæ‚‰äº¤æ¢æœºï¼Œè·¯ç”±å™¨ï¼Œç½‘å¡,ç½‘æ¡¥ç­‰ç‰©ç†è®¾å¤‡é—´çš„å…³ç³»å’ŒåŒºåˆ«ã€‚
ä»¥ä¸‹å‡ ä¸ªæ¦‚å¿µï¼š</p>
<ul>
<li>network namespaceï¼šå®ç°ç½‘ç»œè™šæ‹ŸåŒ–çš„é‡è¦åŠŸèƒ½ï¼Œå®ƒèƒ½åˆ›å»ºå¤šä¸ªéš”ç¦»çš„ç½‘ç»œç©ºé—´ï¼Œå®ƒä»¬æœ‰ç‹¬è‡ªçš„ç½‘ç»œæ ˆä¿¡æ¯ã€‚ä¸ç®¡æ˜¯è™šæ‹Ÿæœºè¿˜æ˜¯å®¹å™¨ï¼Œè¿è¡Œçš„æ—¶å€™ä»¿ä½›è‡ªå·±å°±åœ¨ç‹¬ç«‹çš„ç½‘ç»œä¸­ã€‚</li>
<li>vethï¼šVETH(Virtual Ethernet )æ˜¯Linuxæä¾›çš„å¦å¤–ä¸€ç§ç‰¹æ®Šçš„ç½‘ç»œè®¾å¤‡ï¼Œä¸­æ–‡ç§°ä¸ºè™šæ‹Ÿç½‘å¡æ¥å£ã€‚å®ƒæ€»æ˜¯æˆå¯¹å‡ºç°ï¼Œè¦åˆ›å»ºå°±åˆ›å»ºä¸€ä¸ªpairã€‚ä¸€ä¸ªPairä¸­çš„vethå°±åƒä¸€ä¸ªç½‘ç»œçº¿ç¼†çš„ä¸¤ä¸ªç«¯ç‚¹ï¼Œæ•°æ®ä»ä¸€ä¸ªç«¯ç‚¹è¿›å…¥ï¼Œå¿…ç„¶ä»å¦å¤–ä¸€ä¸ªç«¯ç‚¹æµå‡ºã€‚æ¯ä¸ªvethéƒ½å¯ä»¥è¢«èµ‹äºˆIPåœ°å€ï¼Œå¹¶å‚ä¸ä¸‰å±‚ç½‘ç»œè·¯ç”±è¿‡ç¨‹ï¼Œå¯ä»¥å®ç°ä¸åŒnetnsä¹‹é—´ç½‘ç»œé€šä¿¡ã€‚</li>
<li>ç‰©ç†ç½‘å¡æ˜¯æœåŠ¡å™¨ä¸Šå®é™…çš„ç½‘ç»œæ¥å£è®¾å¤‡ï¼šç‰©ç†ç½‘å¡æŒ‡çš„æ˜¯æœåŠ¡å™¨ä¸Šå®é™…çš„ç½‘ç»œæ¥å£è®¾å¤‡ï¼Œé€šè¿‡ip linkå¯æŸ¥çœ‹è®¾å¤‡ï¼Œå…¶ä¸­eth0ä¸€èˆ¬æ˜¯ç¬¬ä¸€ä¸ªç½‘å¡ï¼Œethnè¡¨ç¤ºç¬¬nä¸ª,é€šè¿‡ip addressæŸ¥çœ‹ipåœ°å€ã€‚</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>liaomin@DESKTOP-FSEDE3P:~$ ip link
16: eth0: &lt;BROADCAST,MULTICAST,UP&gt; mtu 1500 group default qlen 1
    link/ether 78:24:af:33:df:11
20: eth1: &lt;BROADCAST,MULTICAST,UP&gt; mtu 1500 group default qlen 1
    link/ether 7a:15:df:c5:e6:d5
1: lo: &lt;LOOPBACK,UP&gt; mtu 1500 group default qlen 1
    link/loopback 00:00:00:00:00:00</code></pre></div>
<ul>
<li>
<p>ç½‘æ¡¥ï¼šæ˜¯ä¸€ç§è™šæ‹Ÿè®¾å¤‡ï¼Œå¯ä»¥å°† Linux å†…éƒ¨å¤šä¸ªç½‘ç»œæ¥å£è¿æ¥èµ·æ¥ï¼Œä¸€ä¸ªç½‘ç»œæ¥å£æ¥æ”¶åˆ°ç½‘ç»œæ•°æ®åŒ…åï¼Œä¼šå¤åˆ¶åˆ°å…¶ä»–ç½‘ç»œæ¥å£ä¸­ï¼ŒBridge æ˜¯äºŒå±‚è®¾å¤‡ï¼Œä»…ç”¨æ¥å¤„ç†äºŒå±‚çš„é€šè®¯ã€‚Bridge ä½¿ç”¨ MAC åœ°å€è¡¨æ¥å†³å®šæ€ä¹ˆè½¬å‘å¸§ï¼ˆFrameï¼‰ã€‚Bridge ä¼šä» host ä¹‹é—´çš„é€šè®¯æ•°æ®åŒ…ä¸­å­¦ä¹  MAC åœ°å€ã€‚
<a href="#R-image-df3f7c39fdd2aa680a187b8e38310b20" class="lightbox-link"><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" class="lazy lightbox figure-image" loading="lazy" src="/docs/images/content/devops/networking/basic/net_basic_02.md.images/b2d31af95dacbcfa5bd171f3d7223640.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-df3f7c39fdd2aa680a187b8e38310b20"><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" class="lazy lightbox lightbox-image" loading="lazy" src="/docs/images/content/devops/networking/basic/net_basic_02.md.images/b2d31af95dacbcfa5bd171f3d7223640.png"></a>
å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“ç½‘ç»œæ¥å£Aæ¥æ”¶åˆ°æ•°æ®åŒ…åï¼Œç½‘æ¡¥ ä¼šå°†æ•°æ®åŒ…å¤åˆ¶å¹¶ä¸”å‘é€ç»™è¿æ¥åˆ° ç½‘æ¡¥ çš„å…¶ä»–ç½‘ç»œæ¥å£ï¼ˆå¦‚ä¸Šå›¾ä¸­çš„ç½‘å¡Bå’Œç½‘å¡Cï¼‰ã€‚</p>
</li>
<li>
<p>å­ç½‘å¡ï¼šå­ç½‘å¡åœ¨è¿™é‡Œå¹¶ä¸æ˜¯å®é™…ä¸Šçš„ç½‘ç»œæ¥å£è®¾å¤‡ï¼Œä½†æ˜¯å¯ä»¥ä½œä¸ºç½‘ç»œæ¥å£åœ¨ç³»ç»Ÿä¸­å‡ºç°ï¼Œå¦‚eth0:1ã€eth1:2è¿™ç§ç½‘ç»œæ¥å£ã€‚å®ƒä»¬å¿…é¡»è¦ä¾èµ–äºç‰©ç†ç½‘å¡ï¼Œè™½ç„¶å¯ä»¥ä¸ç‰©ç†ç½‘å¡çš„ç½‘ç»œæ¥å£åŒæ—¶åœ¨ç³»ç»Ÿä¸­å­˜åœ¨å¹¶ä½¿ç”¨ä¸åŒçš„IPåœ°å€ï¼Œè€Œä¸”ä¹Ÿæ‹¥æœ‰å®ƒä»¬è‡ªå·±çš„ç½‘ç»œæ¥å£é…ç½®æ–‡ä»¶ã€‚ä½†æ˜¯å½“æ‰€ä¾èµ–çš„ç‰©ç†ç½‘å¡ä¸å¯ç”¨æ—¶ï¼ˆDownçŠ¶æ€ï¼‰è¿™äº›å­ç½‘å¡ä¹Ÿå°†ä¸€åŒä¸èƒ½å·¥ä½œï¼Œå¯é€šè¿‡ipvlanæˆ–è€…ifconfigæ¥åˆ›å»ºã€‚</p>
</li>
<li>
<p>è·¯ç”±ï¼ˆRoutingï¼‰ï¼šè·¯ç”±æ˜¯æŒ‡ä»ä¸€ä¸ªè®¾å¤‡ï¼ˆä¸€èˆ¬æŒ‡è·¯ç”±å™¨ï¼‰çš„æ¥å£ä¸Šæ¥æ”¶åˆ°æ•°æ®åŒ…ï¼Œä¾æ®è®¾å¤‡æ‰€æ—¢å®šçš„æŸäº›è§„åˆ™ï¼Œå°†æ•°æ®åŒ…è½¬å‘åˆ°å…¶å®ƒæ¥å£çš„ â€œè¿‡ç¨‹â€ã€‚è·¯ç”±å·¥ä½œåœ¨ OSI å‚è€ƒæ¨¡å‹ç¬¬ä¸‰å±‚â€”â€”ç½‘ç»œå±‚çš„æ•°æ®åŒ…è½¬å‘è®¾å¤‡ã€‚è·¯ç”±å™¨é€šè¿‡è½¬å‘æ•°æ®åŒ…æ¥å®ç°ç½‘ç»œäº’è¿ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œè·¯ç”±å™¨ä¸ä¼šä¿®æ”¹æ•°æ®åŒ…çš„æºåœ°å€å’Œç›®æ ‡åœ°å€ï¼Œåªæ˜¯è·¯ç”±å™¨å¯ç”¨NATåŠŸèƒ½åï¼Œä¼šå°†IPåœ°å€å’ŒTCPç«¯å£ç»‘å®šé‡æ–°å®šä¹‰ä¸€ä¸ªå‡ºå£IPåœ°å€å’Œæ–°çš„ç«¯å£å·ï¼ˆç«¯å£å·å¯èƒ½ä¸å˜ï¼Œä¹Ÿå¯èƒ½å˜ï¼Œå®¶ç”¨è·¯ç”±å™¨ä¸Šç½‘æºåœ°å€çš„ç«¯å£å·æ˜¯è¦å˜çš„ï¼‰ã€‚</p>
</li>
<li>
<p>ç½‘å…³ï¼šä¸€èˆ¬æ˜¯è·¯ç”±å™¨çš„ipåœ°å€ï¼Œæ¯”å¦‚éœ€è¦è®¿é—®å¦å¤–ä¸€ä¸ªç½‘ç»œçš„ipæ—¶ï¼Œå¯ä»¥å…ˆå°†æ•°æ®åŒ…ä¸¢ç»™è·¯ç”±å™¨ï¼Œè·¯ç”±å™¨ï¼Œå¯ä»¥å°†åŒ…è½¬æ¢åˆ°å¦å¤–çš„ç½‘å¡æˆ–è€…é€šè¿‡natè½¬æ¢ååœ¨å‘é€åˆ°å¦å¤–ç½‘å¡ï¼Œlinuxæœ¬èº«æœ‰ä¸ªip_forwardåŠŸèƒ½å¯ä»¥åœ¨ç½‘å¡é—´è½¬å‘æ•°æ®åŒ…ï¼ˆè·¯ç”±å™¨åŠŸèƒ½ï¼‰ï¼Œåªæ˜¯æ²¡æœ‰natåŠŸèƒ½è€Œå·²ï¼Œå¯ä»¥é€šè¿‡iptablesæ¥å®ç°natåŠŸèƒ½ã€‚</p>
</li>
</ul>
<h1 id="ç¯å¢ƒæ¨¡æ‹Ÿ">ç¯å¢ƒæ¨¡æ‹Ÿ</h1>
<p><a href="#R-image-1d2a628f7c192495667e43ceb8e406b2" class="lightbox-link"><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" class="lazy lightbox figure-image" loading="lazy" src="/docs/images/content/devops/networking/basic/net_basic_02.md.images/e3e303ebff6e31243cf41be784a4cf64.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-1d2a628f7c192495667e43ceb8e406b2"><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" class="lazy lightbox lightbox-image" loading="lazy" src="/docs/images/content/devops/networking/basic/net_basic_02.md.images/e3e303ebff6e31243cf41be784a4cf64.png"></a></p>
<p>ç ”ç©¶è¿™ä¸ªå¯ä»¥ç›´æ¥ä½¿ç”¨è‡ªå·±çš„windowï¼Œå®‰è£…ä¸ªè™šæ‹Ÿæœºå®‰è£…ä¸ªubuntuç„¶ååœ¨ubuntuç³»ç»Ÿä¸­ä½¿ç”¨ipå‘½ä»¤éš”ç¦»ç½‘ç»œæ¥ç ”ç©¶ç½‘ç»œæ¦‚å¿µã€‚</p>
<ol>
<li>windowä¸»æœºæœ‰æœ¬åœ°è¿æ¥ï¼ˆipåœ°å€ï¼š192.168.20.48ï¼‰ç½‘å…³æ˜¯192.168.20.1ã€‚</li>
<li>windowä¸»æœºå®‰è£…äº†hyer-vè™šæ‹Ÿæœºï¼Œå¸¦æœ‰ä¸€ä¸ªdefaultswitchç½‘å…³ï¼Œæˆ‘è¿™é‡Œipåœ°å€æ˜¯172.168.111.1/24</li>
<li>åœ¨hyver-vè™šæ‹Ÿæœºä¸Šæœ‰ä¸€å°ubuntuè™šæ‹Ÿæœºï¼Œç½‘å¡ä¸º:172.168.111.2</li>
</ol>
<h1 id="network-ns">network ns</h1>
<h2 id="ç½‘ç»œè™šæ‹ŸåŒ–">ç½‘ç»œè™šæ‹ŸåŒ–</h2>
<p>network namespace æ˜¯å®ç°ç½‘ç»œè™šæ‹ŸåŒ–çš„é‡è¦åŠŸèƒ½ï¼Œå®ƒèƒ½åˆ›å»ºå¤šä¸ªéš”ç¦»çš„ç½‘ç»œç©ºé—´ï¼Œå®ƒä»¬æœ‰ç‹¬è‡ªçš„ç½‘ç»œæ ˆä¿¡æ¯ã€‚ä¸ç®¡æ˜¯è™šæ‹Ÿæœºè¿˜æ˜¯å®¹å™¨ï¼Œè¿è¡Œçš„æ—¶å€™ä»¿ä½›è‡ªå·±å°±åœ¨ç‹¬ç«‹çš„ç½‘ç»œä¸­ã€‚è¿™ç¯‡æ–‡ç« ä»‹ç» network namespace çš„åŸºæœ¬æ¦‚å¿µå’Œç”¨æ³•ï¼Œnetwork namespace æ˜¯ linux å†…æ ¸æä¾›çš„åŠŸèƒ½ï¼Œè¿™ç¯‡æ–‡ç« å€ŸåŠ© ip å‘½ä»¤æ¥å®Œæˆå„ç§æ“ä½œã€‚ip å‘½ä»¤æ¥è‡ªäº iproute2 å®‰è£…åŒ…ï¼Œä¸€èˆ¬ç³»ç»Ÿä¼šé»˜è®¤å®‰è£…ã€‚</p>
<p>ip å‘½ä»¤ç®¡ç†çš„åŠŸèƒ½å¾ˆå¤šï¼Œ å’Œ network namespace æœ‰å…³çš„æ“ä½œéƒ½æ˜¯åœ¨å­å‘½ä»¤ ip netns ä¸‹è¿›è¡Œçš„ï¼Œå¯ä»¥é€šè¿‡ ip netns help` æŸ¥çœ‹æ‰€æœ‰æ“ä½œçš„å¸®åŠ©ä¿¡æ¯ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨ ip netns æ˜¯æ²¡æœ‰ç½‘ç»œ namespace çš„ï¼Œæ‰€ä»¥ ip netns lsï¼ˆç®€å†™ip netï¼‰ å‘½ä»¤çœ‹ä¸åˆ°ä»»ä½•è¾“å‡ºã€‚</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>[root@localhost ~]# ip netns help
Usage: ip netns list
       ip netns add NAME
       ip netns delete NAME
       ip netns identify PID
       ip netns pids NAME
       ip netns exec NAME cmd ...
       ip netns monitor
[root@localhost ~]# ip netns ls</code></pre></div>
<p>åˆ›å»º network namespace ä¹Ÿéå¸¸ç®€å•ï¼Œç›´æ¥ä½¿ç”¨ ip netns add åé¢è·Ÿç€è¦åˆ›å»ºçš„ namespace åç§°ã€‚å¦‚æœç›¸åŒåå­—çš„ namespace å·²ç»å­˜åœ¨ï¼Œå‘½ä»¤ä¼šæŠ¥ Cannot create namespace çš„é”™è¯¯ã€‚</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>[root@localhost ~]# ip netns add net1
[root@localhost ~]# ip netns ls
net1</code></pre></div>
<p>ip netns å‘½ä»¤åˆ›å»ºçš„ network namespace ä¼šå‡ºç°åœ¨ /var/run/netns/ ç›®å½•ä¸‹ï¼Œå¦‚æœéœ€è¦ç®¡ç†å…¶ä»–ä¸æ˜¯ ip netns åˆ›å»ºçš„ network namespaceï¼Œåªè¦åœ¨è¿™ä¸ªç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæŒ‡å‘å¯¹åº” network namespace æ–‡ä»¶çš„é“¾æ¥å°±è¡Œ
æœ‰äº†è‡ªå·±åˆ›å»ºçš„ network namespaceï¼Œæˆ‘ä»¬è¿˜éœ€è¦çœ‹çœ‹å®ƒé‡Œé¢æœ‰å“ªäº›ä¸œè¥¿ã€‚å¯¹äºæ¯ä¸ª network namespace æ¥è¯´ï¼Œå®ƒä¼šæœ‰è‡ªå·±ç‹¬ç«‹çš„ç½‘å¡ã€è·¯ç”±è¡¨ã€ARP è¡¨ã€iptables ç­‰å’Œç½‘ç»œç›¸å…³çš„èµ„æºã€‚ip å‘½ä»¤æä¾›äº† ip netns exec å­å‘½ä»¤å¯ä»¥åœ¨å¯¹åº”çš„ network namespace ä¸­æ‰§è¡Œå‘½ä»¤ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦çœ‹ä¸€ä¸‹è¿™ä¸ª network namespace ä¸­æœ‰å“ªäº›ç½‘å¡ã€‚æ›´æ£’çš„æ˜¯ï¼Œè¦æ‰§è¡Œçš„å¯ä»¥æ˜¯ä»»ä½•å‘½ä»¤ï¼Œä¸åªæ˜¯å’Œç½‘ç»œç›¸å…³çš„ï¼ˆå½“ç„¶ï¼Œå’Œç½‘ç»œæ— å…³å‘½ä»¤æ‰§è¡Œçš„ç»“æœå’Œåœ¨å¤–éƒ¨æ‰§è¡Œæ²¡æœ‰åŒºåˆ«ï¼‰ã€‚æ¯”å¦‚ä¸‹é¢ä¾‹å­ä¸­ï¼Œæ‰§è¡Œ bash å‘½ä»¤äº†ä¹‹åï¼Œåé¢æ‰€æœ‰çš„å‘½ä»¤éƒ½æ˜¯åœ¨è¿™ä¸ª network namespace ä¸­æ‰§è¡Œçš„ï¼Œå¥½å¤„æ˜¯ä¸ç”¨æ¯æ¬¡æ‰§è¡Œå‘½ä»¤éƒ½è¦æŠŠ ip netns exec NAME è¡¥å…¨ï¼Œç¼ºç‚¹æ˜¯ä½ æ— æ³•æ¸…æ¥šçŸ¥é“è‡ªå·±å½“å‰æ‰€åœ¨çš„ shellï¼Œå®¹æ˜“æ··æ·†ã€‚</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>[root@localhost ~]# ip netns exec net1 ip addr
1: lo: &lt;LOOPBACK&gt; mtu 65536 qdisc noop state DOWN
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
[root@localhost ~]# ip netns exec net1 bash
[root@localhost ~]# ip addr
1: lo: &lt;LOOPBACK&gt; mtu 65536 qdisc noop state DOWN
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
[root@localhost ~]# exit
exit</code></pre></div>
<p>æ¯ä¸ª namespace åœ¨åˆ›å»ºçš„æ—¶å€™ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª lo çš„ interfaceï¼Œå®ƒçš„ä½œç”¨å’Œ linux ç³»ç»Ÿä¸­é»˜è®¤çœ‹åˆ°çš„ lo ä¸€æ ·ï¼Œéƒ½æ˜¯ä¸ºäº†å®ç° loopback é€šä¿¡ã€‚å¦‚æœå¸Œæœ› lo èƒ½å·¥ä½œï¼Œä¸è¦å¿˜è®°å¯ç”¨å®ƒï¼š</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>[root@localhost ~]# ip netns exec net1 ip link set lo up</code></pre></div>
<blockquote>
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->é»˜è®¤æƒ…å†µä¸‹ï¼Œnetwork namespace æ˜¯ä¸èƒ½å’Œä¸»æœºç½‘ç»œï¼Œæˆ–è€…å…¶ä»– network namespace é€šä¿¡çš„ã€‚<!-- raw HTML omitted --><!-- raw HTML omitted --></p></blockquote>
<h3 id="ç½‘ç»œé—´é€šè®¯">ç½‘ç»œé—´é€šè®¯</h3>
<h4 id="è™šæ‹Ÿç½‘å¡">è™šæ‹Ÿç½‘å¡</h4>
<h5 id="veth-pair">veth pair</h5>
<h6 id="è™šæ‹Ÿç½‘ç»œäº’é€š">è™šæ‹Ÿç½‘ç»œäº’é€š</h6>
<p>æœ‰äº†ä¸åŒ network namespace ä¹‹åï¼Œä¹Ÿå°±æœ‰äº†ç½‘ç»œçš„éš”ç¦»ï¼Œä½†æ˜¯å¦‚æœå®ƒä»¬ä¹‹é—´æ²¡æœ‰åŠæ³•é€šä¿¡ï¼Œä¹Ÿæ²¡æœ‰å®é™…ç”¨å¤„ã€‚è¦æŠŠä¸¤ä¸ªç½‘ç»œè¿æ¥èµ·æ¥ï¼Œlinux æä¾›äº† veth pair ã€‚å¯ä»¥æŠŠ veth pair å½“åšæ˜¯åŒå‘çš„ pipeï¼ˆç®¡é“ï¼‰ï¼Œä»ä¸€ä¸ªæ–¹å‘å‘é€çš„ç½‘ç»œæ•°æ®ï¼Œå¯ä»¥ç›´æ¥è¢«å¦å¤–ä¸€ç«¯æ¥æ”¶åˆ°ï¼›æˆ–è€…ä¹Ÿå¯ä»¥æƒ³è±¡æˆä¸¤ä¸ª namespace ç›´æ¥é€šè¿‡ä¸€ä¸ªç‰¹æ®Šçš„è™šæ‹Ÿç½‘å¡è¿æ¥èµ·æ¥ï¼Œå¯ä»¥ç›´æ¥é€šä¿¡ã€‚
ä½¿ç”¨ä¸Šé¢æåˆ°çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å†åˆ›å»ºå¦å¤–ä¸€ä¸ª network namespaceï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ net1 å’Œ net2 ä¸¤ä¸ªåå­—ã€‚</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ip net add net1 &amp;&amp; ip net add net2</code></pre></div>
<p><a href="#R-image-071bacd3db7d54f46f7f5104c7d0104a" class="lightbox-link"><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" class="lazy lightbox figure-image" loading="lazy" src="/docs/images/content/devops/networking/basic/net_basic_02.md.images/e66e4eb7109c21d63e344888baf47a41.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-071bacd3db7d54f46f7f5104c7d0104a"><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" class="lazy lightbox lightbox-image" loading="lazy" src="/docs/images/content/devops/networking/basic/net_basic_02.md.images/e66e4eb7109c21d63e344888baf47a41.png"></a></p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ip link add type veth æ¥åˆ›å»ºä¸€å¯¹ veth pair å‡ºæ¥ï¼Œéœ€è¦è®°ä½çš„æ˜¯ veth pair æ— æ³•å•ç‹¬å­˜åœ¨ï¼Œåˆ é™¤å…¶ä¸­ä¸€ä¸ªï¼ˆip link delete veth0ï¼‰ï¼Œå¦ä¸€ä¸ªä¹Ÿä¼šè‡ªåŠ¨æ¶ˆå¤±ã€‚
é€šè¿‡å‘½ä»¤åˆ›å»ºçš„vethé»˜è®¤æ˜¯æŒ‚è½½åœ¨å®¿ä¸»æœºä¸Š,åˆ›å»ºä¸¤å¯¹vethï¼Œä¸€ä¸ªç”¨äºåœ¨net1å’Œnet2é—´è¿æ¥ï¼Œå¦å¤–ä¸€ä¸ªç”¨äºnet1å’Œå®¿ä¸»æœºè¿›è¡Œè¿æ¥</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>root@liaomin-Virtual-Machine:/home/liaomin# ip link add veth0 type veth peer name veth1 &amp;&amp; ip link add veth2 type veth peer name veth3
root@liaomin-Virtual-Machine:/home/liaomin# ip link
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
    link/ether 00:15:5d:04:11:01 brd ff:ff:ff:ff:ff:ff
7: veth1@veth0: &lt;BROADCAST,MULTICAST,M-DOWN&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000
    link/ether 2a:1d:9f:9e:9f:23 brd ff:ff:ff:ff:ff:ff
8: veth0@veth1: &lt;BROADCAST,MULTICAST,M-DOWN&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000
    link/ether 62:79:b5:a4:4a:ff brd ff:ff:ff:ff:ff:ff
9: veth3@veth2: &lt;BROADCAST,MULTICAST,M-DOWN&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000
    link/ether 2a:92:b7:67:0f:13 brd ff:ff:ff:ff:ff:ff
10: veth2@veth3: &lt;BROADCAST,MULTICAST,M-DOWN&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000
    link/ether 9a:9d:09:4a:72:c9 brd ff:ff:ff:ff:ff:ff</code></pre></div>
<p>æ³¨æ„ é»˜è®¤vethç½‘å¡æ˜¯downæ¨¡å¼ï¼Œéœ€è¦å¯åŠ¨
å°†ç½‘å¡æ·»åŠ åˆ°å¯¹åº”ç½‘ç»œä¸­ã€‚</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ip link set veth0 netns net1 &amp;&amp; ip link set veth1 netns net2 &amp;&amp; ip link set veth2 netns net1 </code></pre></div>
<p>æ£€éªŒä¸‹ å®¿ä¸»æœºåªæœ‰veth3</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>root@liaomin-Virtual-Machine:/home/liaomin# ip link
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
    link/ether 00:15:5d:04:11:01 brd ff:ff:ff:ff:ff:ff
9: veth3@if10: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000
    link/ether 2a:92:b7:67:0f:13 brd ff:ff:ff:ff:ff:ff link-netns net1</code></pre></div>
<p>net1ä¸‹ æœ‰veth0å’Œveth2</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>root@liaomin-Virtual-Machine:/home/liaomin# ip net exec net1 ip link
1: lo: &lt;LOOPBACK&gt; mtu 65536 qdisc noop state DOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
8: veth0@if7: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000
    link/ether 62:79:b5:a4:4a:ff brd ff:ff:ff:ff:ff:ff link-netns net2
10: veth2@if9: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000
    link/ether 9a:9d:09:4a:72:c9 brd ff:ff:ff:ff:ff:ff link-netnsid 0</code></pre></div>
<p>net2ä¸‹æœ‰veth1</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>root@liaomin-Virtual-Machine:/home/liaomin# ip net exec net2 ip link
1: lo: &lt;LOOPBACK&gt; mtu 65536 qdisc noop state DOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
7: veth1@if8: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000
    link/ether 2a:1d:9f:9e:9f:23 brd ff:ff:ff:ff:ff:ff link-netns net1</code></pre></div>
<p>åˆ†åˆ«è®¾ç½®ipå’Œå¯åŠ¨ç½‘å¡</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ip net exec net1 ip addr add 192.167.2.1/24 dev veth0  &amp;&amp; ip net exec net1 ip link set veth0 up &amp;&amp;
ip net exec net2 ip addr add 192.167.2.2/24 dev veth1  &amp;&amp; ip net exec net2 ip link set veth1 up &amp;&amp;
ip net exec net1 ip addr add 192.167.3.1/24 dev veth2  &amp;&amp; ip net exec net1 ip link set veth2 up &amp;&amp;
ip addr add 192.167.3.2/24 dev veth3 &amp;&amp;  ip link set veth3 up</code></pre></div>
<p>æ£€éªŒipåœ°å€</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>root@liaomin-Virtual-Machine:/home/liaomin# ip addr
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether 00:15:5d:04:11:01 brd ff:ff:ff:ff:ff:ff
    inet 172.168.111.2/24 brd 172.168.111.255 scope global noprefixroute eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::5efd:a114:2485:3e10/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever
9: veth3@if10: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 2a:92:b7:67:0f:13 brd ff:ff:ff:ff:ff:ff link-netns net1
    inet 192.167.3.2/24 scope global veth3
       valid_lft forever preferred_lft forever
    inet6 fe80::2892:b7ff:fe67:f13/64 scope link 
       valid_lft forever preferred_lft forever</code></pre></div>
<p>net1ä¸‹</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>root@liaomin-Virtual-Machine:/home/liaomin# ip net exec net1 ip addr
1: lo: &lt;LOOPBACK&gt; mtu 65536 qdisc noop state DOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
8: veth0@if7: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 62:79:b5:a4:4a:ff brd ff:ff:ff:ff:ff:ff link-netns net2
    inet 192.167.2.1/24 scope global veth0
       valid_lft forever preferred_lft forever
    inet6 fe80::6079:b5ff:fea4:4aff/64 scope link 
       valid_lft forever preferred_lft forever
10: veth2@if9: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 9a:9d:09:4a:72:c9 brd ff:ff:ff:ff:ff:ff link-netnsid 0
    inet 192.167.3.1/24 scope global veth2
       valid_lft forever preferred_lft forever
    inet6 fe80::989d:9ff:fe4a:72c9/64 scope link 
       valid_lft forever preferred_lft forever</code></pre></div>
<p>æµ‹è¯•ç½‘ç»œæƒ…å†µ</p>
<ol>
<li>å®¿ä¸»æœºping veth2ï¼ˆé€šï¼‰å’Œveth1ï¼ˆä¸é€šï¼‰</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>root@liaomin-Virtual-Machine:/home/liaomin# ping 192.167.3.1
PING 192.167.3.1 (192.167.3.1) 56(84) bytes of data.
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 192.167.3.1: icmp_seq=1 ttl=64 æ—¶é—´=0.047 æ¯«ç§’
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 192.167.3.1: icmp_seq=2 ttl=64 æ—¶é—´=0.032 æ¯«ç§’
^C
--- 192.167.3.1 ping ç»Ÿè®¡ ---
å·²å‘é€ 2 ä¸ªåŒ…ï¼Œ å·²æ¥æ”¶ 2 ä¸ªåŒ…, 0% åŒ…ä¸¢å¤±, è€—æ—¶ 1018 æ¯«ç§’
rtt min/avg/max/mdev = 0.032/0.039/0.047/0.007 ms
root@liaomin-Virtual-Machine:/home/liaomin# ping 192.167.2.1
PING 192.167.2.1 (192.167.2.1) 56(84) bytes of data.
^C
--- 192.167.2.1 ping ç»Ÿè®¡ ---
å·²å‘é€ 2 ä¸ªåŒ…ï¼Œ å·²æ¥æ”¶ 0 ä¸ªåŒ…, 100% åŒ…ä¸¢å¤±, è€—æ—¶ 1019 æ¯«ç§’</code></pre></div>
<ol start="2">
<li>åœ¨net1ä¸­è®¿é—®å®¿ä¸»æœºveth3ç½‘å¡ï¼ˆé€šï¼‰å’Œeth0ç½‘å¡ï¼ˆä¸é€šï¼‰ï¼Œä»¥åŠnet2 veth1ç½‘å¡ï¼ˆé€šï¼‰</li>
</ol>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>root@liaomin-Virtual-Machine:/home/liaomin# ip net exec net1 ping 192.167.2.2
PING 192.167.2.2 (192.167.2.2) 56(84) bytes of data.
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 192.167.2.2: icmp_seq=1 ttl=64 æ—¶é—´=0.042 æ¯«ç§’
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 192.167.2.2: icmp_seq=2 ttl=64 æ—¶é—´=0.038 æ¯«ç§’
^C
--- 192.167.2.2 ping ç»Ÿè®¡ ---
å·²å‘é€ 2 ä¸ªåŒ…ï¼Œ å·²æ¥æ”¶ 2 ä¸ªåŒ…, 0% åŒ…ä¸¢å¤±, è€—æ—¶ 1008 æ¯«ç§’
rtt min/avg/max/mdev = 0.038/0.040/0.042/0.002 ms
root@liaomin-Virtual-Machine:/home/liaomin# ip net exec net1 ping 192.167.3.2
PING 192.167.3.2 (192.167.3.2) 56(84) bytes of data.
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 192.167.3.2: icmp_seq=1 ttl=64 æ—¶é—´=0.020 æ¯«ç§’
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 192.167.3.2: icmp_seq=2 ttl=64 æ—¶é—´=0.044 æ¯«ç§’
^C
--- 192.167.3.2 ping ç»Ÿè®¡ ---
å·²å‘é€ 2 ä¸ªåŒ…ï¼Œ å·²æ¥æ”¶ 2 ä¸ªåŒ…, 0% åŒ…ä¸¢å¤±, è€—æ—¶ 1024 æ¯«ç§’
rtt min/avg/max/mdev = 0.020/0.032/0.044/0.012 ms
root@liaomin-Virtual-Machine:/home/liaomin# ip net exec net1 ping 172.168.111.2
ping: connect: ç½‘ç»œä¸å¯è¾¾</code></pre></div>
<p>ç»“è®ºï¼š
<a href="#R-image-c217d3afd70e16dcd5ba3c7bbbd61298" class="lightbox-link"><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" class="lazy lightbox figure-image" loading="lazy" src="/docs/images/content/devops/networking/basic/net_basic_02.md.images/a77d9cd9bfea97bcc0d75a0abdce0338.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c217d3afd70e16dcd5ba3c7bbbd61298"><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" class="lazy lightbox lightbox-image" loading="lazy" src="/docs/images/content/devops/networking/basic/net_basic_02.md.images/a77d9cd9bfea97bcc0d75a0abdce0338.png"></a></p>
<ol>
<li>åªæœ‰vethå¯¹å¯¹åº”çš„ipæ‰èƒ½äº’é€šï¼Œnet1å’Œnet2æœ‰veth0å’Œveth1èƒ½è®¿é—®192.167.2.0/24äº’é€šï¼Œä½†æ˜¯éƒ½ä¸èƒ½è®¿é—®å®¿ä¸»æœºçš„eth0ç½‘å¡ã€‚</li>
<li>net1å’Œå®¿ä¸»æœºé—´åªèƒ½é€šè¿‡veth2å’Œveth3è®¿é—®192.167.3.0/24äº’é€šï¼Œå…¶ä»–ç½‘å¡ipä¸èƒ½äº’é€šã€‚</li>
</ol>
<h6 id="ipäº’é€šè·¯ç”±">ipäº’é€šï¼ˆè·¯ç”±ï¼‰</h6>
<p>å®ç°ä¸åŒç½‘ç»œé—´ä¸åŒç½‘æ®µipå¯ä»¥äº’é€šï¼Œå¯ä»¥è·¯ç”±è½¬å‘çš„åŠŸèƒ½å®ç°æ‰€æœ‰ipäº’é€šï¼Œè¿™é‡Œå¯ä»¥å­¦ä¹ ä¸‹è·¯ç”±çš„ç›¸å…³çŸ¥è¯†ã€‚
å…¶å®linuxç³»ç»Ÿæœ¬èº«å°±æ˜¯ä¸€ä¸ªè·¯ç”±å™¨ï¼ŒåŒä¸€ä¸ªä¸»æœºå¤šä¸ªç½‘å¡é—´è¿›è¡Œæ•°æ®åŒ…çš„è½¬å‘ï¼Œå¯é€šè¿‡ç³»ç»Ÿå‚æ•°net.ipv4.ip_forwardæ§åˆ¶ï¼Œé»˜è®¤ä¸º0è¡¨ç¤ºå…³é—­ã€‚</p>
<blockquote>
<p>net1ç½‘ç»œveth0æ¥å—åˆ°ä¸€ä¸ªç›®çš„ipæ˜¯192.167.3.1çš„æŠ¥æ–‡ï¼Œå› ä¸ºæ˜¯åœ¨å†…éƒ¨ç½‘ç»œï¼Œæ·»åŠ è·¯ç”±åå¯ç›´æ¥è®¿é—®ï¼Œå¦‚æœè®¿é—®çš„æ˜¯3.2å¦ä¸€ä¸ªä¸»æœºçš„åœ°å€ï¼Œéœ€è¦é€šè¿‡veth2ä¸­è½¬å‘å‡ºï¼Œip_forward=0åˆ™ä¸¢å¼ƒä¸ä¼šè½¬å‘ï¼Œ=0åˆ™è½¬å‘åˆ°veth2ç½‘å¡ï¼Œä¸¢åˆ°å…¶ä»–ä¸»æœºã€‚
åŒæ—¶è¦ä¸»æœºè·¨ä¸»æœºé—´æ•°æ®åŒ…ä¸­è½¬ï¼Œéœ€è¦åŒå‘è·¯ç”±ï¼Œä¸ç„¶æ•°æ®è¿‡å»äº†æ˜¯å›ä¸æ¥çš„ã€‚</p></blockquote>
<p><!-- raw HTML omitted --><strong>æ‰“å¼€ip_foward</strong><!-- raw HTML omitted -->
åœ¨è¿è¡Œæ—¶ä¿®æ”¹ï¼ˆé‡å¯åå¤±æ•ˆï¼‰</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sysctl -w net.ipv4.ip_forward=1</code></pre></div>
<p>æ°¸ä¹…ç”Ÿæ•ˆ
vi /etc/sysctl.conf
ä¿®æ”¹æˆ–æ–°å¢sysctl -w net.ipv4.ip_forward=1
æ‰§è¡Œå‘½ä»¤åŠ è½½æ–‡ä»¶ç”Ÿæ•ˆ</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>sysctl -p</code></pre></div>
<p><!-- raw HTML omitted --><strong>å®¿ä¸»æœºè®¿é—®net1æ‰€æœ‰ip</strong><!-- raw HTML omitted -->
å½“å‰çŠ¶å†µä¸‹veth2ip:192.167.3.1é€šï¼Œveth0:192.167.2.1ä¸é€š
å®¿ä¸»æœºå› ä¸ºèƒ½è®¿é—®192.167.3.1ï¼Œæ·»åŠ è·¯ç”±ï¼Œè®¿é—®192.167.2.0/24é€šè¿‡ç½‘å…³192.167.3.1ï¼Œç»è¿‡ç½‘å¡veth3</p>
<blockquote>
<p>viaç½‘å…³æŒ‡å®šçš„ip ä¸€å®šè¦æ˜¯å¯ä»¥è®¿é—®çš„æ‰èƒ½æŒ‡å®šã€‚</p></blockquote>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ip route add 192.167.2.0/24 via 192.167.3.1 dev veth3</code></pre></div>
<p>æŸ¥çœ‹è·¯ç”±</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>root@liaomin-Virtual-Machine:/home/liaomin# ip route add 192.167.2.0/24 via 192.167.3.1 dev veth3
root@liaomin-Virtual-Machine:/home/liaomin# ip route
default via 172.168.111.1 dev eth0 proto static metric 100 
169.254.0.0/16 dev eth0 scope link metric 1000 
172.168.111.0/24 dev eth0 proto kernel scope link src 172.168.111.2 metric 100 
192.167.2.0/24 via 192.167.3.1 dev veth3 
192.167.3.0/24 dev veth3 proto kernel scope link src 192.167.3.2</code></pre></div>
<p>åŠ ä¸Šè·¯ç”±åï¼Œå®¿ä¸»æœºä¸¤ä¸ªipéƒ½é€š</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>root@liaomin-Virtual-Machine:/home/liaomin# ping 192.167.2.1
PING 192.167.2.1 (192.167.2.1) 56(84) bytes of data.
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 192.167.2.1: icmp_seq=1 ttl=64 æ—¶é—´=0.028 æ¯«ç§’
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 192.167.2.1: icmp_seq=2 ttl=64 æ—¶é—´=0.033 æ¯«ç§’
^C
--- 192.167.2.1 ping ç»Ÿè®¡ ---
å·²å‘é€ 2 ä¸ªåŒ…ï¼Œ å·²æ¥æ”¶ 2 ä¸ªåŒ…, 0% åŒ…ä¸¢å¤±, è€—æ—¶ 1027 æ¯«ç§’
rtt min/avg/max/mdev = 0.028/0.030/0.033/0.002 ms
root@liaomin-Virtual-Machine:/home/liaomin# ping 192.167.3.1
PING 192.167.3.1 (192.167.3.1) 56(84) bytes of data.
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 192.167.3.1: icmp_seq=1 ttl=64 æ—¶é—´=0.019 æ¯«ç§’
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 192.167.3.1: icmp_seq=2 ttl=64 æ—¶é—´=0.029 æ¯«ç§’</code></pre></div>
<p>å…³é—­ip_fowardæµ‹è¯•ä¸‹ï¼Œä¾ç„¶èƒ½é€šè¯´æ˜ï¼Œè¯´æ˜ä¸»æœºå†…éƒ¨ç½‘ç»œä¸­è½¬æ˜¯å’Œip_forwardæ— å…³</p>
<p><!-- raw HTML omitted --><strong>å®¿ä¸»æœºé€šè¿‡net1è®¿é—®net2ip</strong><!-- raw HTML omitted -->
è¿˜æ˜¯å‰é¢çš„è·¯ç”±ï¼Œå…ˆæ‰“å¼€ip_forwardã€‚å®¿ä¸»æœºå°è¯•ping 192.167.2.2ï¼Œæ˜æ˜¾ä¸é€š
ä½†æ˜¯åœ¨net1ç½‘ç»œä¸­æ˜¯å¯ä»¥é€š192.167.2.2ï¼Œå› ä¸ºæœ‰veth
å°è¯•åœ¨net2ä¸­æŠ“åŒ…,å‘ç°åªæœ‰requestæ²¡æœ‰reply</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>root@liaomin-Virtual-Machine:/home/liaomin# ip net exec net2 tcpdump -nn -i veth1 icmp
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on veth1, link-type EN10MB (Ethernet), capture size 262144 bytes
^C10:59:38.879329 IP 192.167.3.2 &gt; 192.167.2.2: ICMP echo request, id 25, seq 1, length 64
10:59:39.888796 IP 192.167.3.2 &gt; 192.167.2.2: ICMP echo request, id 25, seq 2, length 64
10:59:40.912715 IP 192.167.3.2 &gt; 192.167.2.2: ICMP echo request, id 25, seq 3, length 64
10:59:41.936728 IP 192.167.3.2 &gt; 192.167.2.2: ICMP echo request, id 25, seq 4, length 64
10:59:42.960757 IP 192.167.3.2 &gt; 192.167.2.2: ICMP echo request, id 25, seq 5, length 64</code></pre></div>
<p>è¯´æ˜æ¥è‡ªå®¿ä¸»æœº192.167.3.2çš„åŒ…å·²ç»åˆ°äº†ï¼Œä½†æ˜¯å®¿ä¸»æœºå› ä¸ºæ¥å—ä¸åˆ°å›åº”ã€‚
å…³é—­ip_forwardï¼ˆæ³¨æ„æ˜¯net1æ˜¯ä¸­è½¬çš„ï¼Œè¦å…³ä»–ï¼‰,åœ¨å°è¯•æŠ“åŒ…</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ip net exec net1 sysctl -w net.ipv4.ip_forward=0  
root@liaomin-Virtual-Machine:/home/liaomin# ip net exec net1 sysctl -a | grep ip_forward      
net.ipv4.ip_forward = 0
net.ipv4.ip_forward_update_priority = 1
net.ipv4.ip_forward_use_pmtu = 0</code></pre></div>
<p>å‘ç°æ— æ³•æŠ“å–åˆ°åŒ…ï¼Œè¯æ˜äº†ip_forwardåŠŸèƒ½</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>root@liaomin-Virtual-Machine:/home/liaomin# ip net exec net2 tcpdump -nn -i veth1 icmp
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on veth1, link-type EN10MB (Ethernet), capture size 262144 bytes
^C
0 packets captured
0 packets received by filter
0 packets dropped by kernel</code></pre></div>
<p>æ·»åŠ net2å›ç¨‹è·¯ç”±</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>root@liaomin-Virtual-Machine:/home/liaomin# ip net exec net2 ip route add 192.167.3.0/24 via 192.167.2.1 dev veth1 
root@liaomin-Virtual-Machine:/home/liaomin# ping 192.167.2.2
PING 192.167.2.2 (192.167.2.2) 56(84) bytes of data.
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 192.167.2.2: icmp_seq=1 ttl=63 æ—¶é—´=0.062 æ¯«ç§’
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 192.167.2.2: icmp_seq=2 ttl=63 æ—¶é—´=0.043 æ¯«ç§’</code></pre></div>
<p>net2æŠ“åŒ…ï¼Œå¯ä»¥çœ‹åˆ°replay</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>root@liaomin-Virtual-Machine:/home/liaomin# ip net exec net2 tcpdump -nn -i veth1 icmp
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on veth1, link-type EN10MB (Ethernet), capture size 262144 bytes
^C11:12:40.738563 IP 192.167.3.2 &gt; 192.167.2.2: ICMP echo request, id 38, seq 1, length 64
11:12:40.738603 IP 192.167.2.2 &gt; 192.167.3.2: ICMP echo reply, id 38, seq 1, length 64
11:12:41.744679 IP 192.167.3.2 &gt; 192.167.2.2: ICMP echo request, id 38, seq 2, length 64
11:12:41.744714 IP 192.167.2.2 &gt; 192.167.3.2: ICMP echo reply, id 38, seq 2, length 64
11:12:42.768699 IP 192.167.3.2 &gt; 192.167.2.2: ICMP echo request, id 38, seq 3, length 64
11:12:42.768732 IP 192.167.2.2 &gt; 192.167.3.2: ICMP echo reply, id 38, seq 3, length 64
11:12:43.792688 IP 192.167.3.2 &gt; 192.167.2.2: ICMP echo request, id 38, seq 4, length 64
11:12:43.792722 IP 192.167.2.2 &gt; 192.167.3.2: ICMP echo reply, id 38, seq 4, length 64</code></pre></div>
<p><!-- raw HTML omitted --><strong>windowä¸»æœºè®¿é—®net2æ‰€æœ‰ip</strong><!-- raw HTML omitted -->
<a href="#R-image-4719d81ca159e690e5b9dcba0cc95ffb" class="lightbox-link"><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" class="lazy lightbox figure-image" loading="lazy" src="/docs/images/content/devops/networking/basic/net_basic_02.md.images/2e375dfd9d20b1759acf7670873ef508.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4719d81ca159e690e5b9dcba0cc95ffb"><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" class="lazy lightbox lightbox-image" loading="lazy" src="/docs/images/content/devops/networking/basic/net_basic_02.md.images/2e375dfd9d20b1759acf7670873ef508.png"></a></p>
<p>windowä¸‹æ·»åŠ è·¯ç”±è®¿é—®192.167.2.0/24å’Œ192.167.3.0/24è®¾ç½®ç½‘å…³ä¸ºeth0ip 172.168.111.2ï¼Œæ³¨æ„linuxå®¿ä¸»æœºæ‰“å¼€ip_forward</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ç®¡ç†å‘˜æƒé™æ‰§è¡Œ
route add 192.167.3.0 mask 255.255.255.0 172.168.111.2
route add 192.167.2.0 mask 255.255.255.0 172.168.111.2</code></pre></div>
<p>æ­¤æ—¶ping 192.167.3.2èƒ½é€šï¼Œä½†æ˜¯3.1ä¸é€šï¼Œæ•°æ®åŒ…åœ¨net1å¯ä»¥æŠ“åˆ°ï¼Œå› ä¸ºæ²¡æœ‰é…ç½®å›ç¨‹è·¯ç”±è¯´ä»¥æ— æ³•è®¿é—®ï¼Œæ•°æ®åŒ…åŸåœ°å€ä¸º172.168.111.1ï¼Œ</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>root@liaomin-Virtual-Machine:/home/liaomin# ip net exec net1 tcpdump -nn -i veth2  icmp
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on veth2, link-type EN10MB (Ethernet), capture size 262144 bytes
^C15:28:10.774530 IP 172.168.111.1 &gt; 192.167.3.1: ICMP echo request, id 1, seq 141, length 40</code></pre></div>
<p>åœ¨net1ä¸Šæ·»åŠ å›ç¨‹è·¯ç”±</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ip net exec net1 ip route add 172.168.111.0/24 via 192.167.3.2 dev veth2</code></pre></div>
<p>windowä¸Šåœ¨pingï¼Œæ­£å¸¸é€šäº†</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>root@liaomin-Virtual-Machine:/home/liaomin# ip net exec net1 tcpdump -nn -i veth2  icmp                                            
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on veth2, link-type EN10MB (Ethernet), capture size 262144 bytes
^C15:32:26.718218 IP 172.168.111.1 &gt; 192.167.3.1: ICMP echo request, id 1, seq 142, length 40
15:32:26.718261 IP 192.167.3.1 &gt; 172.168.111.1: ICMP echo reply, id 1, seq 142, length 40
15:32:27.720527 IP 172.168.111.1 &gt; 192.167.3.1: ICMP echo request, id 1, seq 143, length 40
15:32:27.720564 IP 192.167.3.1 &gt; 172.168.111.1: ICMP echo reply, id 1, seq 143, length 40
15:32:28.722827 IP 172.168.111.1 &gt; 192.167.3.1: ICMP echo request, id 1, seq 144, length 40
15:32:28.722867 IP 192.167.3.1 &gt; 172.168.111.1: ICMP echo reply, id 1, seq 144, length 40</code></pre></div>
<p>å› ä¸º192.167.3.2é€šäº†ï¼Œå›ç¨‹çŸ¥é“å¦‚ä½•èµ°ï¼Œ192.167.2.1è‡ªç„¶ä¹Ÿå°±é€šäº†
æ­¤æ—¶ping 192.167.2.2 è‡ªç„¶ä¸é€šï¼Œå› ä¸ºæ•°æ®åŒ…åˆ°äº†net2ï¼Œæ²¡æœ‰è¿”ç¨‹è·¯ç”±
net2æ‰§è¡Œï¼Œè‡ªç„¶ä¹Ÿå°±é€šäº†</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ip net exec net2 ip route add 172.168.111.0/24 via 192.167.2.1 dev veth1</code></pre></div>
<p><!-- raw HTML omitted --><strong>net2ä¸»æœºè®¿é—®windowæ‰€æœ‰ip</strong><!-- raw HTML omitted -->
ä¸»è¦åœ¨net1å’Œnet2ä¸­æ·»åŠ 20.0/24è·¯ç”±ç­–ç•¥å³å¯</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ip net exec net1 ip route add 192.168.20.0/24 via 192.167.3.2 dev veth2
ip net exec net2 ip route add 192.168.20.0/24 via 192.167.2.1 dev veth1 
root@liaomin-Virtual-Machine:/home/liaomin# ip net exec net2 ping 192.168.20.48                                    
PING 192.168.20.48 (192.168.20.48) 56(84) bytes of data.
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 192.168.20.48: icmp_seq=1 ttl=125 æ—¶é—´=0.295 æ¯«ç§’
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 192.168.20.48: icmp_seq=2 ttl=125 æ—¶é—´=2.09 æ¯«ç§’</code></pre></div>
<p><!-- raw HTML omitted --><strong>net1å’Œnet2å¯ä¸Šç½‘</strong><!-- raw HTML omitted -->
æŒ‡å®šé»˜è®¤çš„è®¾å¤‡ä¿®æ”¹ç½‘å…³ä¸ºwindowä¸»æœºçš„ç½‘å…³ã€‚</p>
<blockquote>
<p>ä¸€å®šè¦ä¿è¯ç½‘å…³åœ°å€æ˜¯å¯ä»¥pingé€šååœ¨æ·»åŠ é»˜è®¤ç½‘å…³è·¯ç”±</p></blockquote>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ip net exec net1 ip route add default dev veth2  #æ³¨æ„è¿™é‡Œä¸èƒ½å…ˆæŒ‡å®šç½‘å…³ï¼Œå¦åˆ™ä¼šæŠ¥é”™
ip net exec net1 ip route change default via 192.168.20.1 
root@liaomin-Virtual-Machine:/home/liaomin# ping www.baidu.com
PING www.a.shifen.com (163.177.151.110) 56(84) bytes of data.
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 163.177.151.110 (163.177.151.110): icmp_seq=1 ttl=54 æ—¶é—´=8.90 æ¯«ç§’
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 163.177.151.110 (163.177.151.110): icmp_seq=2 ttl=54 æ—¶é—´=9.02 æ¯«ç§’
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 163.177.151.110 (163.177.151.110): icmp_seq=3 ttl=54 æ—¶é—´=14.0 æ¯«ç§’
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 163.177.151.110 (163.177.151.110): icmp_seq=4 ttl=54 æ—¶é—´=9.24 æ¯«ç§’
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 163.177.151.110 (163.177.151.110): icmp_seq=5 ttl=54 æ—¶é—´=9.14 æ¯«ç§’</code></pre></div>
<h5 id="ipvlan">ipvlan</h5>
<p>IPVlan æ˜¯ä»ä¸€ä¸ªä¸»æœºæ¥å£è™šæ‹Ÿå‡ºå¤šä¸ªè™šæ‹Ÿç½‘ç»œæ¥å£ã€‚ä¸€ä¸ªé‡è¦çš„åŒºåˆ«å°±æ˜¯æ‰€æœ‰çš„è™šæ‹Ÿæ¥å£éƒ½æœ‰ç›¸åŒçš„ macv åœ°å€ï¼Œè€Œæ‹¥æœ‰ä¸åŒçš„ ip åœ°å€ã€‚å› ä¸ºæ‰€æœ‰çš„è™šæ‹Ÿæ¥å£è¦å…±äº« mac åœ°å€ã€‚</p>
<blockquote>
<p>ipvlanæ’ä»¶ä¸‹ï¼Œå®¹å™¨ä¸èƒ½è·ŸHostç½‘ç»œé€šä¿¡,</p></blockquote>
<p>é€šè¿‡ipå‘½ä»¤æä¾›çš„ç½‘ç»œéš”ç¦»èƒ½åŠ›åœ¨åŒä¸€ä¸ªç‰©ç†ä¸»æœºä¸‹åˆ›å»ºä¸¤ä¸ªè™šæ‹Ÿç½‘ç»œnet1å’Œnet2ï¼Œåˆ›å»ºä¸¤ä¸ªç½‘å¡ipvlan1å’Œipvlan2ï¼Œå°†ipvlan1ç»‘å®šåˆ°net1æŒ‡å®šipä¸º192.168.11.1/24ï¼Œå°†ipvlan2ç»‘å®šåˆ°net2æŒ‡å®šipä¸º192.168.12.1/24,æˆ‘è¿™é‡Œå®¿ä¸»æœºçš„ç½‘å¡eth0ï¼Œipä¸º172.17.203.237
<a href="#R-image-6b26f42a24fa967a18ce1ead83e59749" class="lightbox-link"><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" class="lazy lightbox figure-image" loading="lazy" src="/docs/images/content/devops/networking/basic/net_basic_02.md.images/fcda05b30902129264325f4e32ac9840.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-6b26f42a24fa967a18ce1ead83e59749"><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" class="lazy lightbox lightbox-image" loading="lazy" src="/docs/images/content/devops/networking/basic/net_basic_02.md.images/fcda05b30902129264325f4e32ac9840.png"></a></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>cat &lt;&lt;EOF | bash
#å­˜åœ¨æ·»åŠ ä¸¤ä¸ªç½‘ç»œnet1å’Œnet2ç›´æ¥åˆ é™¤
((ip netns ls | grep net1 &gt;/dev/null) &amp;&amp; ip netns delete net1) &amp;&amp; ((ip netns ls | grep net2 &gt;/dev/null) &amp;&amp; ip netns delete net2)
#æ–°å¢ç½‘ç»œnet1å’Œnet2
ip netns add net1 &amp;&amp; ip netns add net2
# æ–°å¢ipvlan1è™šæ‹Ÿç½‘å¡å’Œipvalan2è™šæ‹Ÿç½‘å¡æŒ‚è½½åˆ°ç‰©ç†ç½‘å¡eth0æ˜¯ipvlanç±»å‹ï¼Œæ¨¡å¼æ˜¯l3
ip link add ipvlan1 link eth0 type ipvlan mode l3 &amp;&amp; ip link add ipvlan2 link eth0 type ipvlan mode l3
#å°†ipvlan1åŠ å…¥åˆ°ç½‘ç»œnet1ä¸­ï¼Œipvlan2åŠ å…¥åˆ°ç½‘ç»œnet2ä¸­ã€‚
ip link set netns net1 ipvlan1 &amp;&amp; ip link set netns net2 ipvlan2
#åˆ†è¡¨è®¾ç½®ipvlan1å’Œipvlan2çš„ipåœ°å€å’Œç½‘å¡è®¾å¤‡
ip netns exec  net1 ip addr add 192.168.11.1/24 dev ipvlan1 &amp;&amp; ip netns exec  net2 ip addr add 192.168.12.1/24 dev ipvlan2
#å¯åŠ¨loå’Œipvlanç½‘å¡è®¾å¤‡ã€‚
ip netns exec  net1 ip link set lo up &amp;&amp; ip netns exec  net2 ip link set lo up
ip netns exec  net1 ip link set ipvlan1 up &amp;&amp; ip netns exec  net2 ip link set ipvlan2 up
#åˆ†åˆ«è®¾ç½®å„è‡ªç½‘ç»œç¯å¢ƒçš„é»˜è®¤è·¯ç”±ç½‘å¡è®¾å¤‡æ˜¯ipvlan1å’Œipvlan2ï¼Œè®¾ç½®äº†è¯¥è·¯ç”±ç­–ç•¥åï¼Œnet1å’Œnet2äº’é€šï¼ˆæ³¨æ„ä¸¤ä¸ªéƒ½éœ€è¦è®¾ç½®ï¼‰
ip netns exec net1 ip route add default dev ipvlan1 &amp;&amp; ip netns exec net2 ip route add default dev ipvlan2
EOF</code></pre></div>
<p>æŸ¥çœ‹è¿ä¸ªipvlançš„ç‰©ç†åœ°å€ï¼ˆå‘ç°ipvlan1å’Œ2ç‰©ç†åœ°å€éƒ½æ˜¯00:15:5d:04:11:01å’Œç‰©ç†æœºç‰©ç†åœ°å€ç›¸åŒï¼‰</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>root@liaomin-Virtual-Machine:/home/liaomin# ip link #æŸ¥çœ‹ç‰©ç†ä¸»æœºç½‘ç»œ
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
   link/ether 00:15:5d:04:11:01 brd ff:ff:ff:ff:ff:ff 
root@liaomin-Virtual-Machine:/home/liaomin# ip netns exec net1 ip link #æŸ¥çœ‹net1ç½‘ç»œ
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
32: ipvlan1@if2: &lt;BROADCAST,MULTICAST,NOARP,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/ether 00:15:5d:04:11:01 brd ff:ff:ff:ff:ff:ff link-netnsid 0
root@liaomin-Virtual-Machine:/home/liaomin# ip netns exec net2 ip link  #æŸ¥çœ‹net2ç½‘ç»œ
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
33: ipvlan2@if2: &lt;BROADCAST,MULTICAST,NOARP,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/ether 00:15:5d:04:11:01 brd ff:ff:ff:ff:ff:ff link-netnsid 0</code></pre></div>
<h5 id="macvlan">macvlan</h5>
<p>æ¯ä¸ªç½‘å¡ä¸€ä¸ªå•ç‹¬çš„macåœ°å€ï¼ŒåŠŸèƒ½å’Œipvlanç±»ä¼¼</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code># åˆ›å»ºä¸¤ä¸ª macvlan å­æ¥å£
ip link add link eth0 dev mac1 type macvlan mode bridge
ip link add link eth0 dev mac2 type macvlan mode bridge

# åˆ›å»ºä¸¤ä¸ª namespace
ip netns add net3
ip netns add net4

# å°†ä¸¤ä¸ªå­æ¥å£åˆ†åˆ«æŒ‚åˆ°ä¸¤ä¸ª namespace ä¸­
ip link set mac1 netns net3
ip link set mac2 netns net4

# é…ç½® IP å¹¶å¯ç”¨
ip netns exec net3 ip a a 192.166.56.122/24 dev mac1
ip netns exec net3 ip l s mac1 up

ip netns exec net4 ip a a 192.166.56.123/24 dev mac2 #ç­‰ä»·äºip add addr
ip netns exec net4 ip l s mac2 up   # ip l sç­‰ä»·äº ip link set </code></pre></div>
<p>å¯ä»¥æŸ¥çœ‹åˆ°ä¸¤ä¸ªç‰©ç†åœ°å€éƒ½ä¸ä¸€æ ·ï¼Œå’Œå®¿ä¸»æœºä¹Ÿä¸åŒ</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>root@liaomin-Virtual-Machine:/home/liaomin# ip net exec net3 ip addr
1: lo: &lt;LOOPBACK&gt; mtu 65536 qdisc noop state DOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
11: mac1@if2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether b6:e4:e5:e6:70:1f brd ff:ff:ff:ff:ff:ff link-netnsid 0
    inet 192.166.56.122/24 scope global mac1
       valid_lft forever preferred_lft forever
    inet6 fe80::b4e4:e5ff:fee6:701f/64 scope link 
       valid_lft forever preferred_lft forever
root@liaomin-Virtual-Machine:/home/liaomin# ip net exec net4 ip addr 
1: lo: &lt;LOOPBACK&gt; mtu 65536 qdisc noop state DOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
12: mac2@if2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether e2:f8:76:3e:36:16 brd ff:ff:ff:ff:ff:ff link-netnsid 0
    inet 192.166.56.123/24 scope global mac2
       valid_lft forever preferred_lft forever
    inet6 fe80::e0f8:76ff:fe3e:3616/64 scope link 
       valid_lft forever preferred_lft forever</code></pre></div>
<p>æ ¹æ® macvlan å­æ¥å£ä¹‹é—´çš„é€šä¿¡æ¨¡å¼ï¼Œmacvlan æœ‰å››ç§ç½‘ç»œæ¨¡å¼ï¼š</p>
<ol>
<li>private æ¨¡å¼:åŒä¸€ä¸»æ¥å£ä¸‹çš„å­æ¥å£ä¹‹é—´å½¼æ­¤éš”ç¦»ï¼Œä¸èƒ½é€šä¿¡ã€‚å³ä½¿ä»å¤–éƒ¨çš„ç‰©ç†äº¤æ¢æœºå¯¼æµï¼Œä¹Ÿä¼šè¢«æ— æƒ…åœ°ä¸¢æ‰ã€‚</li>
<li>vepa(virtual ethernet port aggregator) æ¨¡å¼:è¿™ç§æ¨¡å¼ä¸‹ï¼Œå­æ¥å£ä¹‹é—´çš„é€šä¿¡æµé‡éœ€è¦å¯¼åˆ°å¤–éƒ¨æ”¯æŒ 802.1Qbg/VPEA åŠŸèƒ½çš„äº¤æ¢æœºä¸Šï¼ˆå¯ä»¥æ˜¯ç‰©ç†çš„æˆ–è€…è™šæ‹Ÿçš„ï¼‰ï¼Œç»ç”±å¤–éƒ¨äº¤æ¢æœºè½¬å‘ï¼Œå†ç»•å›æ¥ã€‚
æ³¨ï¼š802.1Qbg/VPEA åŠŸèƒ½ç®€å•è¯´å°±æ˜¯äº¤æ¢æœºè¦æ”¯æŒ å‘å¤¹ï¼ˆhairpinï¼‰ åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯æ•°æ®åŒ…ä»ä¸€ä¸ªæ¥å£ä¸Šæ”¶ä¸Šæ¥ä¹‹åè¿˜èƒ½å†æ‰”å›å»ã€‚</li>
<li>bridge æ¨¡å¼:æ¨¡æ‹Ÿçš„æ˜¯ Linux bridge çš„åŠŸèƒ½ï¼Œä½†æ¯” bridge è¦å¥½çš„ä¸€ç‚¹æ˜¯æ¯ä¸ªæ¥å£çš„ MAC åœ°å€æ˜¯å·²çŸ¥çš„ï¼Œä¸ç”¨å­¦ä¹ ã€‚æ‰€ä»¥ï¼Œè¿™ç§æ¨¡å¼ä¸‹ï¼Œå­æ¥å£ä¹‹é—´å°±æ˜¯ç›´æ¥å¯ä»¥é€šä¿¡çš„ã€‚</li>
<li>passthru æ¨¡å¼:åªå…è®¸å•ä¸ªå­æ¥å£è¿æ¥ä¸»æ¥å£ï¼Œä¸”å¿…é¡»è®¾ç½®æˆæ··æ‚æ¨¡å¼ï¼Œä¸€èˆ¬ç”¨äºå­æ¥å£æ¡¥æ¥å’Œåˆ›å»º VLAN å­æ¥å£çš„åœºæ™¯</li>
</ol>
<h4 id="ç½‘æ¡¥">ç½‘æ¡¥</h4>
<p>è™½ç„¶ veth pair å¯ä»¥å®ç°ä¸¤ä¸ª network namespace ä¹‹é—´çš„é€šä¿¡ï¼Œä½†æ˜¯å½“å¤šä¸ª namespace éœ€è¦é€šä¿¡çš„æ—¶å€™ï¼Œå°±æ— èƒ½ä¸ºåŠ›äº†ã€‚
è®²åˆ°å¤šä¸ªç½‘ç»œè®¾å¤‡é€šä¿¡ï¼Œæˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„äº¤æ¢æœºå’Œè·¯ç”±å™¨ã€‚å› ä¸ºè¿™é‡Œè¦è€ƒè™‘çš„åªæ˜¯åŒä¸ªç½‘ç»œï¼Œæ‰€ä»¥åªç”¨åˆ°äº¤æ¢æœºçš„åŠŸèƒ½ã€‚linux å½“ç„¶ä¹Ÿæä¾›äº†è™šæ‹Ÿäº¤æ¢æœºçš„åŠŸèƒ½ï¼Œæˆ‘ä»¬è¿˜æ˜¯ç”¨ ip å‘½ä»¤æ¥å®Œæˆæ‰€æœ‰çš„æ“ä½œã€‚</p>
<blockquote>
<p>NOTEï¼šå’Œ bridge æœ‰å…³çš„æ“ä½œä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤ brctlï¼Œè¿™ä¸ªå‘½ä»¤æ¥è‡ª bridge-utils è¿™ä¸ªåŒ…ï¼Œè¯»è€…å¯ä»¥æ ¹æ®è‡ªå·±çš„å‘è¡Œç‰ˆè¿›è¡Œå®‰è£…ï¼Œä½¿ç”¨æ–¹æ³•è¯·æŸ¥é˜… man é¡µé¢æˆ–è€…ç›¸å…³æ–‡æ¡£ã€‚</p></blockquote>
<p>å®‰è£…bridge-utils</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>apt install bridge-utils -y</code></pre></div>
<p>æŸ¥çœ‹æ‰€æœ‰ç½‘æ¡¥ï¼š</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>root@liaomin-Virtual-Machine:/home/liaomin# brctl show
bridge name     bridge id               STP enabled     interfaces
br0             8000.000000000000       no</code></pre></div>
<p>é¦–å…ˆæˆ‘ä»¬æ¥åˆ›å»ºéœ€è¦çš„ bridgeï¼Œç®€å•èµ·è§åå­—å°±å«åš br0ã€‚</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>[root@localhost ~]# ip link add br0 type bridge
[root@localhost ~]# ip link set dev br0 up</code></pre></div>
<p><a href="#R-image-256ffaef2c78a6203e31ee4f6652e4d0" class="lightbox-link"><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" class="lazy lightbox figure-image" loading="lazy" src="/docs/images/content/devops/networking/basic/net_basic_02.md.images/c31fe960246bafb29d3e48cab1c32279.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-256ffaef2c78a6203e31ee4f6652e4d0"><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" class="lazy lightbox lightbox-image" loading="lazy" src="/docs/images/content/devops/networking/basic/net_basic_02.md.images/c31fe960246bafb29d3e48cab1c32279.png"></a></p>
<p>åˆ›å»ºä¸¤ä¸ªç½‘ç»œnet7å’Œnet8 åˆ†åˆ«åˆ›å»ºveth0-1å’Œveth2-3åˆ†è¡¨æŒ‚è½½ç½‘æ¡¥ï¼Œå®ç°ä¸åŒç½‘ç»œé—´äº’é€š</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>ip net add net7 &amp;&amp; ip net add net8
#æ–°å¢veth10å’Œveth11 è®¾ç½®ipå’Œå¯åŠ¨
ip link add veth10 type veth peer name veth11 &amp;&amp; ip link set dev veth10 netns net7 &amp;&amp; ip net exec net7 ip addr add 192.177.1.3/24 dev veth10 &amp;&amp; ip net exec net7 ip link set dev veth10 up
# å°†veth11æ·»åŠ åˆ°ç½‘æ¡¥
ip link set dev veth11 master br0 &amp;&amp; ip link set dev veth11 up
#æ–°å¢veth12å’Œveth13 è®¾ç½®ipå’Œå¯åŠ¨
ip link add veth12 type veth peer name veth13 &amp;&amp; ip link set dev veth12 netns net8 &amp;&amp; ip net exec net8 ip addr add 192.177.1.4/24 dev veth12 &amp;&amp; ip net exec net8 ip link set dev veth12 up
# å°†veth11æ·»åŠ åˆ°ç½‘æ¡¥
ip link set dev veth13 master br0 &amp;&amp; ip link set dev veth13 up</code></pre></div>
<p>å¯ä»¥é€šè¿‡ bridge å‘½ä»¤ï¼ˆä¹Ÿæ˜¯ iproute2 åŒ…è‡ªå¸¦çš„å‘½ä»¤ï¼‰æ¥æŸ¥çœ‹ bridge ç®¡ç†çš„ link ä¿¡æ¯ï¼š</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>root@liaomin-Virtual-Machine:/home/liaomin# bridge link
14: veth11@if15: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master br0 state forwarding priority 32 cost 2 
16: veth13@if17: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master br0 state forwarding priority 32 cost 2 </code></pre></div>
<p>æœ€åé€šè¿‡ ping å‘½ä»¤æ¥æµ‹è¯•ç½‘ç»œçš„è¿é€šæ€§ï¼š</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code>root@liaomin-Virtual-Machine:/home/liaomin# ping 192.177.1.4
PING 192.177.1.4 (192.177.1.4) 56(84) bytes of data.
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 192.177.1.4: icmp_seq=1 ttl=49 æ—¶é—´=157 æ¯«ç§’
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 192.177.1.4: icmp_seq=2 ttl=49 æ—¶é—´=158 æ¯«ç§’
å·²å‘é€ 2 ä¸ªåŒ…ï¼Œ å·²æ¥æ”¶ 2 ä¸ªåŒ…, 0% åŒ…ä¸¢å¤±, è€—æ—¶ 1002 æ¯«ç§’
rtt min/avg/max/mdev = 157.421/157.685/157.950/0.264 ms
root@liaomin-Virtual-Machine:/home/liaomin# ping 192.177.1.3
PING 192.177.1.3 (192.177.1.3) 56(84) bytes of data.
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 192.177.1.3: icmp_seq=1 ttl=49 æ—¶é—´=159 æ¯«ç§’
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 192.177.1.3: icmp_seq=2 ttl=49 æ—¶é—´=158 æ¯«ç§’
root@liaomin-Virtual-Machine:/home/liaomin# ip net exec net8 ping 192.177.1.3
PING 192.177.1.3 (192.177.1.3) 56(84) bytes of data.
64 æ¯”ç‰¹ï¼Œæ¥è‡ª 192.177.1.3: icmp_seq=1 ttl=64 æ—¶é—´=0.055 æ¯«ç§’</code></pre></div>

  <footer class="footline">
              <i class='fa-fw fas fa-calendar'></i> Sep 18, 2025
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
          <a id="R-logo" class="R-default" href="/docs/index.html">
            <div class="logo-title">liaomin416100569åšå®¢</div>
          </a>
        </div>
        <search><form action="/docs/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
            <li class="" data-nav-id="/docs/index.html"><a class="padding" href="/docs/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-id="/docs/programming/index.html"><a class="padding" href="/docs/programming/index.html">ç¼–ç¨‹å¼€å‘</a><ul id="R-subsections-e3fc01b477dbaf64a8f5013a3dab5c5b" class="collapsible-menu"></ul></li>
            <li class="parent " data-nav-id="/docs/devops/index.html"><a class="padding" href="/docs/devops/index.html">è¿ç»´ä¸€ä½“åŒ–</a><ul id="R-subsections-389d4feb4920b919bcbc0b1e9947dace" class="collapsible-menu">
            <li class="alwaysopen " data-nav-id="/docs/devops/kubernetes/index.html"><a class="padding" href="/docs/devops/kubernetes/index.html">kubernetes</a><ul id="R-subsections-a6d9d4850f81ae033d42cdaa03dad084" class="collapsible-menu"></ul></li>
            <li class="parent alwaysopen " data-nav-id="/docs/devops/networking/index.html"><a class="padding" href="/docs/devops/networking/index.html">ç½‘ç»œæŠ€æœ¯</a><ul id="R-subsections-bd6b3f75e8269a91d29691b78d3bac17" class="collapsible-menu">
            <li class="parent alwaysopen " data-nav-id="/docs/devops/networking/basic/index.html"><a class="padding" href="/docs/devops/networking/basic/index.html">ç½‘ç»œåŸºç¡€</a><ul id="R-subsections-736e298d464a228d5f70014b04a0f7a2" class="collapsible-menu">
            <li class="" data-nav-id="/docs/devops/networking/basic/net_basic/index.html"><a class="padding" href="/docs/devops/networking/basic/net_basic/index.html">è®¡ç®—æœºç½‘ç»œåŸºç¡€00-ç½‘ç»œåˆ†å±‚</a></li>
            <li class="" data-nav-id="/docs/devops/networking/basic/net_basic_01/index.html"><a class="padding" href="/docs/devops/networking/basic/net_basic_01/index.html">è®¡ç®—æœºç½‘ç»œåŸºç¡€01-IPåœ°å€ç›¸å…³çŸ¥è¯†</a></li>
            <li class="active " data-nav-id="/docs/devops/networking/basic/net_basic_02/index.html"><a class="padding" href="/docs/devops/networking/basic/net_basic_02/index.html">è®¡ç®—æœºç½‘ç»œåŸºç¡€02-linuxè™šæ‹Ÿç½‘ç»œéš”ç¦»ï¼ˆç½‘æ¡¥bridgeï¼Œè·¯ç”±ï¼Œè™šæ‹Ÿç½‘å¡vethï¼‰</a></li></ul></li>
            <li class="alwaysopen " data-nav-id="/docs/devops/networking/packet_capture/index.html"><a class="padding" href="/docs/devops/networking/packet_capture/index.html">ç½‘ç»œæŠ“åŒ…</a><ul id="R-subsections-0589ce82bed54f8d96552feda54e19b5" class="collapsible-menu"></ul></li></ul></li></ul></li>
            <li class="" data-nav-id="/docs/security/index.html"><a class="padding" href="/docs/security/index.html">å®‰å…¨æ”»é˜²</a><ul id="R-subsections-66815ecaaecfc1c209e5637d03b258b2" class="collapsible-menu"></ul></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
          </ul>
        </div>
<div id="R-footer"><p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p></div>
      </div>
    </aside>
    <script src="/docs/js/clipboard/clipboard.min.js?1758355652" defer></script>
    <script src="/docs/js/perfect-scrollbar/perfect-scrollbar.min.js?1758355652" defer></script>
    <script src="/docs/js/theme.min.js?1758355652" defer></script>
  </body>
</html>
